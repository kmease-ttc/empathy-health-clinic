import{O as T,aG as U,G as g,u as y,j as e,L as w,S as F,a as q,b as c,C,c as $,d as P,e as S,m as k,B as i,g as D}from"./index-CgsemtNf.js";import{B as o}from"./badge-CYF5D6iW.js";import{U as H}from"./user-CnprKFnV.js";import{C as L}from"./chevron-left-CEZX0wsk.js";import{C as z}from"./chevron-right-CHNAaBtb.js";const O="/attached_assets/stock_images/calm_forest_trees_me_c92dd644.jpg",G=["Mental Health","Wellness","Therapy","Anxiety","Depression"];function X(){const[,E]=T(),u=U(),p=new URLSearchParams(u),d=parseInt(p.get("page")||"1",10),B=isNaN(d)||d<1?1:d,[l,I]=g.useState(void 0),[s,f]=g.useState(B);g.useEffect(()=>{const t=parseInt(p.get("page")||"1",10);t!==s&&!isNaN(t)&&t>=1&&f(t)},[u]);const{data:m}=y({queryKey:["/api/blog-posts",{page:1,pageSize:11}],queryFn:async()=>(await fetch("/api/blog-posts?page=1&pageSize=11")).json()}),{data:r,isLoading:j}=y({queryKey:["/api/blog-posts",{category:l,page:s,pageSize:12}],queryFn:async()=>{const t=new URLSearchParams({page:s.toString(),pageSize:"12"});return l&&t.append("category",l),(await fetch(`/api/blog-posts?${t}`)).json()}}),h=((m==null?void 0:m.posts)||[]).slice(0,3),A=new Set(h.map(t=>t.id)),b=(r==null?void 0:r.posts)||[],N=s===1&&!l?b.filter(t=>!A.has(t.id)):b,n=(r==null?void 0:r.totalPages)||1,v=t=>{I(t),f(1),E("/blog")};if(j&&!r)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(w,{className:"h-12 w-12 animate-spin text-primary"})});const x=s>1,M=x?`Mental Health Blog - Page ${s} | Empathy Health Clinic`:"Mental Health Blog | Empathy Health Clinic",R=x?`Page ${s} of our mental health blog. Expert insights & resources for mental health, wellness & growth from licensed professionals.`:"Expert insights & resources for mental health, wellness & growth from mental health professionals. Support for anxiety, depression & more.",_=x?`Mental Health Blog - Page ${s}`:"Mental Health Blog";return e.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[e.jsx(F,{title:M,description:R,keywords:["mental health blog","therapy advice","wellness tips","mental health resources","psychiatric care","counseling insights"],canonicalPath:"/blog",type:"website",pagination:n>1?{currentPage:s,totalPages:n,basePath:"/blog"}:void 0}),e.jsx(q,{}),e.jsxs("main",{className:"flex-1",children:[e.jsxs("div",{className:"relative py-20 px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${O})`,filter:"brightness(1.3)"},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 via-black/50 to-black/60"})}),e.jsxs("div",{className:"container mx-auto max-w-6xl relative z-10 text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-sans font-bold mb-6 text-white","data-testid":"text-page-title",children:_}),e.jsx("p",{className:"text-lg md:text-xl text-white/90 max-w-3xl mx-auto leading-relaxed",children:"Expert insights, guidance, and resources for mental health, wellness, and personal growth. Written by mental health professionals for everyone seeking support and understanding."})]})]}),h.length>0&&e.jsx("section",{className:"py-12 md:py-16 bg-background border-b",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:[e.jsx("h2",{className:"text-2xl font-sans font-bold mb-6 text-foreground",children:"Latest Articles"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:h.map((t,a)=>e.jsx(c,{href:`/blog/${t.slug}`,"data-testid":`latest-post-link-${a}`,children:e.jsxs(C,{className:"h-full min-h-[420px] hover-elevate cursor-pointer flex flex-col overflow-hidden","data-testid":`latest-post-card-${a}`,children:[t.featuredImage&&e.jsx("img",{src:t.featuredImage,alt:`${t.title} - Mental Health Blog - Empathy Health Clinic`,className:"h-48 w-full object-cover",width:400,height:192,loading:"lazy",decoding:"async",style:{aspectRatio:"400/192"},"data-testid":`img-latest-post-${a}`}),e.jsxs($,{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx(o,{variant:"secondary","data-testid":`badge-category-${a}`,children:t.category})}),e.jsx(P,{className:"text-xl font-sans leading-tight mb-3","data-testid":`text-blog-title-${a}`,children:t.title}),e.jsx("p",{className:"text-muted-foreground line-clamp-3 text-sm","data-testid":`text-blog-excerpt-${a}`,children:t.excerpt})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground border-t pt-4",children:[e.jsxs("div",{className:"flex items-center gap-1","data-testid":`text-blog-author-${a}`,children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:t.author})]}),e.jsxs("div",{className:"flex items-center gap-1","data-testid":`text-blog-date-${a}`,children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(t.publishedDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})})]})},t.id))})]})}),e.jsx("section",{className:"py-16 md:py-20 bg-background",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[e.jsx("h2",{className:"text-2xl font-sans font-bold text-foreground",children:l?`${l} Articles`:"All Articles"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Filter:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(o,{variant:l?"outline":"default",className:"cursor-pointer hover-elevate",onClick:()=>v(""),"data-testid":"badge-filter-all",children:"All Topics"}),G.map(t=>e.jsx(o,{variant:l===t?"default":"outline",className:"cursor-pointer hover-elevate",onClick:()=>v(t),"data-testid":`badge-filter-${t.toLowerCase().replace(/\s+/g,"-")}`,children:t},t))]})]})]}),j?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(w,{className:"h-8 w-8 animate-spin text-primary"})}):N.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:N.map((t,a)=>e.jsx(c,{href:`/blog/${t.slug}`,"data-testid":`paginated-post-link-${a}`,children:e.jsxs(C,{className:"h-full min-h-[420px] hover-elevate cursor-pointer flex flex-col overflow-hidden","data-testid":`paginated-post-card-${a}`,children:[t.featuredImage&&e.jsx("img",{src:t.featuredImage,alt:`${t.title} - Mental Health Blog - Empathy Health Clinic`,className:"h-48 w-full object-cover",width:400,height:192,loading:"lazy",decoding:"async",style:{aspectRatio:"400/192"},"data-testid":`img-paginated-post-${a}`}),e.jsxs($,{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx(o,{variant:"secondary","data-testid":`badge-paginated-category-${a}`,children:t.category})}),e.jsx(P,{className:"text-xl font-sans leading-tight mb-3","data-testid":`text-paginated-title-${a}`,children:t.title}),e.jsx("p",{className:"text-muted-foreground line-clamp-3 text-sm","data-testid":`text-paginated-excerpt-${a}`,children:t.excerpt})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground border-t pt-4",children:[e.jsxs("div",{className:"flex items-center gap-1","data-testid":`text-paginated-author-${a}`,children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:t.author})]}),e.jsxs("div",{className:"flex items-center gap-1","data-testid":`text-paginated-date-${a}`,children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:new Date(t.publishedDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})})]})},t.id))}),n>1&&e.jsxs("nav",{className:"flex items-center justify-center gap-2 mt-12","aria-label":"Blog pagination",children:[s>1?e.jsx(i,{variant:"outline",size:"sm",asChild:!0,"data-testid":"button-previous-page",children:e.jsxs(c,{href:s===2?"/blog":`/blog?page=${s-1}`,children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),"Previous"]})}):e.jsxs(i,{variant:"outline",size:"sm",disabled:!0,"data-testid":"button-previous-page",children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:n},(t,a)=>a+1).map(t=>{if(t===1||t===n||t>=s-1&&t<=s+1){const a=t===1?"/blog":`/blog?page=${t}`;return e.jsx(i,{variant:s===t?"default":"outline",size:"sm",asChild:s!==t,"aria-current":s===t?"page":void 0,"data-testid":`button-page-${t}`,children:s===t?e.jsx("span",{children:t}):e.jsx(c,{href:a,children:t})},t)}else if(t===s-2||t===s+2)return e.jsx("span",{className:"px-2 text-muted-foreground",children:"..."},t);return null})}),s<n?e.jsx(i,{variant:"outline",size:"sm",asChild:!0,"data-testid":"button-next-page",children:e.jsxs(c,{href:`/blog?page=${s+1}`,children:["Next",e.jsx(z,{className:"h-4 w-4 ml-1"})]})}):e.jsxs(i,{variant:"outline",size:"sm",disabled:!0,"data-testid":"button-next-page",children:["Next",e.jsx(z,{className:"h-4 w-4 ml-1"})]})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground text-lg",children:l?`No ${l.toLowerCase()} articles available yet.`:"No articles available yet."})})]})}),e.jsx("section",{className:"py-16 bg-card border-t",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 lg:px-8 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-sans font-bold text-foreground mb-6",children:"Need Professional Support?"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:"If you're struggling with mental health concerns, our compassionate team is here to help. Schedule a consultation with our licensed mental health professionals."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(i,{size:"lg",asChild:!0,"data-testid":"button-schedule-cta",children:e.jsx("a",{href:"tel:3868488751",children:"Call 386-848-8751"})}),e.jsx(i,{size:"lg",variant:"outline",asChild:!0,"data-testid":"button-services-cta",children:e.jsx(c,{href:"/services",children:"Explore Our Services"})})]})]})})]}),e.jsx(D,{})]})}export{X as default};
