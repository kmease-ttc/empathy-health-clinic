import{G as b,O as C,Q as S,j as e,f as i,B as l,W as p,P as N,y as P,t as y}from"./index-CgsemtNf.js";import{o as T,s as r,u as I,t as L,F as _,a as m,b as d,c,d as x,e as u}from"./form-BhnXJzrv.js";import{T as A}from"./textarea-BXdjjUtM.js";import{getUTMDataForLead as E}from"./utm-tracker-CYS4998A.js";const W=T({name:r().min(2,"Name must be at least 2 characters"),email:r().email("Please enter a valid email address"),phone:r().min(10,"Please enter a valid phone number"),therapyInterest:r().optional(),message:r().optional(),hp_website:r().optional()});function J({therapyName:h}){const[v,M]=b.useState(!1),[,w]=C(),f=b.useRef(!1),n=()=>{f.current||(f.current=!0,y("form_started","engagement","Lead Capture Form","short"))},a=I({resolver:L(W),defaultValues:{name:"",email:"",phone:"",therapyInterest:h||"",message:"",hp_website:""}}),o=S({mutationFn:async t=>{const j=t.name.trim().split(" "),F=j[0]||t.name,k=j.slice(1).join(" ")||" ",s=E(),g=await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:F,lastName:k,email:t.email,phone:t.phone,service:t.therapyInterest||h||"",formType:"short",smsOptIn:"false",conditions:"[]",symptoms:"[]",landingPage:s.landingPage,utmSource:s.utmSource,utmMedium:s.utmMedium,utmCampaign:s.utmCampaign,utmTerm:s.utmTerm,utmContent:s.utmContent,gclid:s.gclid,fbclid:s.fbclid,hp_website:t.hp_website||""})});if(!g.ok)throw new Error("Failed to submit lead");return g.json()},onSuccess:()=>{y("form_submission","conversion","Lead Capture Form",h),w("/thank-you")}});return v?e.jsx("div",{className:"bg-gradient-to-br from-primary/5 to-primary/10 border-2 border-primary/20 rounded-lg p-6",children:e.jsxs("div",{className:"bg-white dark:bg-card rounded-lg p-6 md:p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(i,{className:"h-10 w-10 text-primary"})}),e.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-foreground mb-3",children:"Request Received!"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Thank you for reaching out. We'll contact you within 24 hours to confirm your appointment."}),e.jsxs("div",{className:"bg-background border rounded-lg p-4 mb-6 text-left",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-3",children:"What Happens Next?"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"text-primary font-bold",children:"1."}),e.jsx("span",{className:"text-muted-foreground",children:"Our team reviews your request"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"text-primary font-bold",children:"2."}),e.jsx("span",{className:"text-muted-foreground",children:"We call you to schedule within 24 hours"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"text-primary font-bold",children:"3."}),e.jsx("span",{className:"text-muted-foreground",children:"You attend your first session"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(l,{variant:"outline",asChild:!0,children:e.jsx("a",{href:"tel:3868488751",children:"Call (386) 848-8751"})}),e.jsx(l,{variant:"outline",asChild:!0,children:e.jsx("a",{href:"/",children:"Return to Home"})})]})]})}):e.jsxs("div",{className:"bg-gradient-to-br from-primary/5 to-primary/10 border-2 border-primary/20 rounded-lg p-6 sticky top-4",children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-foreground mb-2",children:"Start Your Healing Journey Today"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Schedule a confidential consultation with our expert therapists"})]}),e.jsxs("div",{className:"bg-white dark:bg-card rounded-lg p-4 mb-5 border",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(i,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground font-medium",children:"Most Insurance Accepted"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Verify your coverage today"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(i,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground font-medium",children:"Same-Week Appointments"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get help when you need it"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(i,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground font-medium",children:"Licensed Professionals"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Expert, compassionate care"})]})]})]}),e.jsx(_,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(t=>o.mutate(t)),className:"space-y-4",children:[e.jsxs("div",{className:"hp-field","aria-hidden":"true",children:[e.jsx("label",{htmlFor:"hp_website",children:"Website"}),e.jsx("input",{type:"text",id:"hp_website",...a.register("hp_website"),autoComplete:"off",tabIndex:-1})]}),e.jsx(m,{control:a.control,name:"name",render:({field:t})=>e.jsxs(d,{children:[e.jsx(c,{className:"text-foreground font-medium",children:"Full Name *"}),e.jsx(x,{children:e.jsx(p,{placeholder:"John Smith",...t,autoComplete:"name",className:"bg-white dark:bg-background",onFocus:n,"data-testid":"input-lead-name"})}),e.jsx(u,{})]})}),e.jsx(m,{control:a.control,name:"email",render:({field:t})=>e.jsxs(d,{children:[e.jsx(c,{className:"text-foreground font-medium",children:"Email Address *"}),e.jsx(x,{children:e.jsx(p,{type:"email",placeholder:"john@example.com",...t,autoComplete:"email",className:"bg-white dark:bg-background",onFocus:n,"data-testid":"input-lead-email"})}),e.jsx(u,{})]})}),e.jsx(m,{control:a.control,name:"phone",render:({field:t})=>e.jsxs(d,{children:[e.jsx(c,{className:"text-foreground font-medium",children:"Phone Number *"}),e.jsx(x,{children:e.jsx(p,{type:"tel",placeholder:"(386) 555-1234",...t,autoComplete:"tel",className:"bg-white dark:bg-background",onFocus:n,"data-testid":"input-lead-phone"})}),e.jsx(u,{})]})}),e.jsx(m,{control:a.control,name:"message",render:({field:t})=>e.jsxs(d,{children:[e.jsx(c,{className:"text-foreground font-medium",children:"Additional Information (Optional)"}),e.jsx(x,{children:e.jsx(A,{placeholder:"Tell us about your needs or preferred appointment times...",className:"resize-none bg-white dark:bg-background min-h-[80px]",...t,value:t.value||"",onFocus:n,"data-testid":"input-lead-message"})}),e.jsx(u,{})]})}),e.jsx(l,{type:"submit",size:"lg",className:"w-full",disabled:o.isPending,"data-testid":"button-submit-lead",children:o.isPending?"Submitting...":e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Request Appointment"]})}),o.isError&&e.jsx("p",{className:"text-sm text-destructive text-center",children:"Something went wrong. Please try again or call us directly."})]})}),e.jsx("div",{className:"mt-5 pt-5 border-t",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-foreground",children:[e.jsx(P,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:"HIPAA-Compliant | Secure | We'll call you within 24 hours"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your privacy is protected by federal law"})]})}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Prefer to talk now?"}),e.jsx(l,{variant:"outline",className:"w-full",asChild:!0,"data-testid":"button-call-now",children:e.jsxs("a",{href:"tel:3868488751",className:"flex items-center justify-center gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),"Call 386-848-8751"]})})]})]})}export{J as L};
