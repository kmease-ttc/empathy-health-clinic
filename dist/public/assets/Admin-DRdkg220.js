var Ma=Object.defineProperty;var Fa=(s,t,n)=>t in s?Ma(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var r=(s,t,n)=>Fa(s,typeof t!="symbol"?t+"":t,n);import{N as te,u as se,Q as O,j as e,L as R,C as X,c as H,d as J,F as W,e as ie,W as w,B as S,a1 as Q,a7 as V,G as k,M as Re,m as qa,O as Ba}from"./index-CgsemtNf.js";import{T as La,a as Oa,b as Y,c as ee}from"./tabs-BonmKIaG.js";import{B as Qa,D as Va,E as Ua,I as za,N as $a,O as Ka,P as Ra,h as Me,i as Za,j as ka,k as Ga,l as Xa,m as Ha,n as Ja,p as Wa,q as Ya,r as eo,v as Ze,w as to,x as so,y as no,z as io,A as ro,Z as ao,C as oo,G as lo,H as co,J as uo,K as mo,L as po,M as ho,Q as go,R as xo,S as fo,T as jo,U as yo,V as bo,W as No,X as To,Y as vo,_ as So,$ as wo,a0 as Po,a1 as _o,a2 as Co,a3 as Do,a4 as Io,a5 as Eo,a6 as Ao,a7 as ve,f as Oi,a8 as Mo,a9 as Qi,aa as Fo,ab as Vi,ac as qo,ad as Bo,ae as Lo,af as Oo,ag as ke,g as Qo,ah as Vo,ai as Uo,aj as zo,ak as $o,al as Ko,am as Ro,an as Zo,ao as ko,ap as Go,aq as Xo,ar as Ho,as as Jo,at as Wo,au as Yo,av as el,aw as tl,ax as sl,ay as Ui,az as nl,aA as zi,o as $i,aB as il,aC as rl,aD as al,aE as ol,aF as ll,aG as dl,aH as cl,aI as ul,aJ as ml,aK as Ki,aL as pl,aM as hl,aN as gl,s as Qe,aO as xl,aP as fl,aQ as jl,aR as Ve,aS as yl,aT as bl,aU as Nl,u as re,F as ae,a as x,b as f,c as j,d as y,e as b,t as oe,aV as B}from"./form-BhnXJzrv.js";import{T as L}from"./textarea-BXdjjUtM.js";import{D as ue,a as me,b as pe,c as he,d as ge,e as xe}from"./dialog-C65p-0H7.js";import{a as fe,P as je,S as Tl}from"./send-BpVPQXDa.js";import{T as ye}from"./trash-2-BGg7VW7-.js";import{H as vl}from"./house-d9x4eLL5.js";import"./label-BjwbQxMY.js";const Sl=Object.freeze(Object.defineProperty({__proto__:null,BRAND:Qa,DIRTY:Va,EMPTY_PATH:Ua,INVALID:za,NEVER:$a,OK:Ka,ParseStatus:Ra,Schema:Me,ZodAny:Za,ZodArray:ka,ZodBigInt:Ga,ZodBoolean:Xa,ZodBranded:Ha,ZodCatch:Ja,ZodDate:Wa,ZodDefault:Ya,ZodDiscriminatedUnion:eo,ZodEffects:Ze,ZodEnum:to,ZodError:so,get ZodFirstPartyTypeKind(){return no},ZodFunction:io,ZodIntersection:ro,ZodIssueCode:ao,ZodLazy:oo,ZodLiteral:lo,ZodMap:co,ZodNaN:uo,ZodNativeEnum:mo,ZodNever:po,ZodNull:ho,ZodNullable:go,ZodNumber:xo,ZodObject:fo,ZodOptional:jo,ZodParsedType:yo,ZodPipeline:bo,ZodPromise:No,ZodReadonly:To,ZodRecord:vo,ZodSchema:Me,ZodSet:So,ZodString:wo,ZodSymbol:Po,ZodTransformer:Ze,ZodTuple:_o,ZodType:Me,ZodUndefined:Co,ZodUnion:Do,ZodUnknown:Io,ZodVoid:Eo,addIssueToContext:Ao,any:ve,array:Oi,bigint:Mo,boolean:Qi,coerce:Fo,custom:Vi,date:qo,datetimeRegex:Bo,defaultErrorMap:Lo,discriminatedUnion:Oo,effect:ke,enum:Qo,function:Vo,getErrorMap:Uo,getParsedType:zo,instanceof:$o,intersection:Ko,isAborted:Ro,isAsync:Zo,isDirty:ko,isValid:Go,late:Xo,lazy:Ho,literal:Jo,makeIssue:Wo,map:Yo,nan:el,nativeEnum:tl,never:sl,null:Ui,nullable:nl,number:zi,object:$i,get objectUtil(){return il},oboolean:rl,onumber:al,optional:ol,ostring:ll,pipeline:dl,preprocess:cl,promise:ul,quotelessJson:ml,record:Ki,set:pl,setErrorMap:hl,strictObject:gl,string:Qe,symbol:xl,transformer:ke,tuple:fl,undefined:jl,union:Ve,unknown:yl,get util(){return bl},void:Nl},Symbol.toStringTag,{value:"Module"})),m=Symbol.for("drizzle:entityKind");function $(s,t){if(!s||typeof s!="object")return!1;if(s instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,m))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(s).constructor;if(n)for(;n;){if(m in n&&n[m]===t[m])return!0;n=Object.getPrototypeOf(n)}return!1}var tt;tt=m;class ce{constructor(t,n){r(this,"name");r(this,"keyAsName");r(this,"primary");r(this,"notNull");r(this,"default");r(this,"defaultFn");r(this,"onUpdateFn");r(this,"hasDefault");r(this,"isUnique");r(this,"uniqueName");r(this,"uniqueType");r(this,"dataType");r(this,"columnType");r(this,"enumValues");r(this,"generated");r(this,"generatedIdentity");r(this,"config");this.table=t,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}r(ce,tt,"Column");var st;st=m;class Ri{constructor(t,n,i){r(this,"config");r(this,"$default",this.$defaultFn);r(this,"$onUpdate",this.$onUpdateFn);this.config={name:t,keyAsName:t==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){this.config.name===""&&(this.config.name=t)}}r(Ri,st,"ColumnBuilder");const le=Symbol.for("drizzle:Name");var nt;nt=m;class Zi{constructor(t,n){r(this,"reference");r(this,"_onUpdate","no action");r(this,"_onDelete","no action");this.reference=()=>{const{name:i,columns:c,foreignColumns:l}=t();return{name:i,columns:c,foreignTable:l[0].table,foreignColumns:l}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(t){return this._onUpdate=t===void 0?"no action":t,this}onDelete(t){return this._onDelete=t===void 0?"no action":t,this}build(t){return new ki(t,this)}}r(Zi,nt,"PgForeignKeyBuilder");var it;it=m;class ki{constructor(t,n){r(this,"reference");r(this,"onUpdate");r(this,"onDelete");this.table=t,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}getName(){const{name:t,columns:n,foreignColumns:i}=this.reference(),c=n.map(u=>u.name),l=i.map(u=>u.name),h=[this.table[le],...c,i[0].table[le],...l];return t??`${h.join("_")}_fk`}}r(ki,it,"PgForeignKey");function wl(s,...t){return s(...t)}function Pl(s,t){return`${s[le]}_${t.join("_")}_unique`}function Ge(s,t,n){for(let i=t;i<s.length;i++){const c=s[i];if(c==="\\"){i++;continue}if(c==='"')return[s.slice(t,i).replace(/\\/g,""),i+1];if(!n&&(c===","||c==="}"))return[s.slice(t,i).replace(/\\/g,""),i]}return[s.slice(t).replace(/\\/g,""),s.length]}function Gi(s,t=0){const n=[];let i=t,c=!1;for(;i<s.length;){const l=s[i];if(l===","){(c||i===t)&&n.push(""),c=!0,i++;continue}if(c=!1,l==="\\"){i+=2;continue}if(l==='"'){const[g,N]=Ge(s,i+1,!0);n.push(g),i=N;continue}if(l==="}")return[n,i+1];if(l==="{"){const[g,N]=Gi(s,i+1);n.push(g),i=N;continue}const[h,u]=Ge(s,i,!1);n.push(h),i=u}return[n,i]}function _l(s){const[t]=Gi(s,1);return t}function Xi(s){return`{${s.map(t=>Array.isArray(t)?Xi(t):typeof t=="string"?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}var rt,at;class P extends(at=Ri,rt=m,at){constructor(){super(...arguments);r(this,"foreignKeyConfigs",[])}array(n){return new Ji(this.config.name,this,n)}references(n,i={}){return this.foreignKeyConfigs.push({ref:n,actions:i}),this}unique(n,i){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=i==null?void 0:i.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,i){return this.foreignKeyConfigs.map(({ref:c,actions:l})=>wl((h,u)=>{const g=new Zi(()=>{const N=h();return{columns:[n],foreignColumns:[N]}});return u.onUpdate&&g.onUpdate(u.onUpdate),u.onDelete&&g.onDelete(u.onDelete),g.build(i)},c,l))}buildExtraConfigColumn(n){return new Hi(n,this.config)}}r(P,rt,"PgColumnBuilder");var ot,lt;class T extends(lt=ce,ot=m,lt){constructor(t,n){n.uniqueName||(n.uniqueName=Pl(t,[n.name])),super(t,n),this.table=t}}r(T,ot,"PgColumn");var dt,ct;class Hi extends(ct=T,dt=m,ct){constructor(){super(...arguments);r(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});r(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}r(Hi,dt,"ExtraConfigColumn");var ut,mt;class Ji extends(mt=P,ut=m,mt){constructor(t,n,i){super(t,"array","PgArray"),this.config.baseBuilder=n,this.config.size=i}build(t){const n=this.config.baseBuilder.build(t);return new Le(t,this.config,n)}}r(Ji,ut,"PgArrayBuilder");var pt,ht;const De=class De extends(ht=T,pt=m,ht){constructor(n,i,c,l){super(n,i);r(this,"size");this.baseColumn=c,this.range=l,this.size=i.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(n){return typeof n=="string"&&(n=_l(n)),n.map(i=>this.baseColumn.mapFromDriverValue(i))}mapToDriverValue(n,i=!1){const c=n.map(l=>l===null?null:$(this.baseColumn,De)?this.baseColumn.mapToDriverValue(l,!0):this.baseColumn.mapToDriverValue(l));return i?c:Xi(c)}};r(De,pt,"PgArray");let Le=De;const Xe=Symbol.for("drizzle:isPgEnum");function Cl(s){return!!s&&typeof s=="function"&&Xe in s&&s[Xe]===!0}var gt;gt=m;class Ue{constructor(t,n,i,c=!1){this._={brand:"Subquery",sql:t,selectedFields:n,alias:i,isWith:c}}}r(Ue,gt,"Subquery");const Dl={startActiveSpan(s,t){return t()}},de=Symbol.for("drizzle:ViewBaseConfig"),Fe=Symbol.for("drizzle:Schema"),He=Symbol.for("drizzle:Columns"),Je=Symbol.for("drizzle:ExtraConfigColumns"),qe=Symbol.for("drizzle:OriginalName"),Be=Symbol.for("drizzle:BaseName"),Se=Symbol.for("drizzle:IsAlias"),We=Symbol.for("drizzle:ExtraConfigBuilder"),Wi=Symbol.for("drizzle:IsDrizzleTable");var xt,ft,jt,yt,bt,Nt,Tt,vt,St,wt;wt=m,St=le,vt=qe,Tt=Fe,Nt=He,bt=Je,yt=Be,jt=Se,ft=Wi,xt=We;class K{constructor(t,n,i){r(this,St);r(this,vt);r(this,Tt);r(this,Nt);r(this,bt);r(this,yt);r(this,jt,!1);r(this,ft,!0);r(this,xt);this[le]=this[qe]=t,this[Fe]=n,this[Be]=i}}r(K,wt,"Table"),r(K,"Symbol",{Name:le,Schema:Fe,OriginalName:qe,Columns:He,ExtraConfigColumns:Je,BaseName:Be,IsAlias:Se,ExtraConfigBuilder:We});function Yi(s){return typeof s=="object"&&s!==null&&Wi in s}function Il(s){return s!=null&&typeof s.getSQL=="function"}function El(s){var n;const t={sql:"",params:[]};for(const i of s)t.sql+=i.sql,t.params.push(...i.params),(n=i.typings)!=null&&n.length&&(t.typings||(t.typings=[]),t.typings.push(...i.typings));return t}var Pt;Pt=m;class Z{constructor(t){r(this,"value");this.value=Array.isArray(t)?t:[t]}getSQL(){return new U([this])}}r(Z,Pt,"StringChunk");var _t;_t=m;const ne=class ne{constructor(t){r(this,"decoder",er);r(this,"shouldInlineParams",!1);this.queryChunks=t}append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return Dl.startActiveSpan("drizzle.buildSQL",n=>{const i=this.buildQueryFromSourceParams(this.queryChunks,t);return n==null||n.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(t,n){const i=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:c,escapeName:l,escapeParam:h,prepareTyping:u,inlineParams:g,paramStartIndex:N}=i;return El(t.map(p=>{var A;if($(p,Z))return{sql:p.value.join(""),params:[]};if($(p,we))return{sql:l(p.value),params:[]};if(p===void 0)return{sql:"",params:[]};if(Array.isArray(p)){const v=[new Z("(")];for(const[a,D]of p.entries())v.push(D),a<p.length-1&&v.push(new Z(", "));return v.push(new Z(")")),this.buildQueryFromSourceParams(v,i)}if($(p,ne))return this.buildQueryFromSourceParams(p.queryChunks,{...i,inlineParams:g||p.shouldInlineParams});if($(p,K)){const v=p[K.Symbol.Schema],a=p[K.Symbol.Name];return{sql:v===void 0||p[Se]?l(a):l(v)+"."+l(a),params:[]}}if($(p,ce)){const v=c.getColumnCasing(p);if(n.invokeSource==="indexes")return{sql:l(v),params:[]};const a=p.table[K.Symbol.Schema];return{sql:p.table[Se]||a===void 0?l(p.table[K.Symbol.Name])+"."+l(v):l(a)+"."+l(p.table[K.Symbol.Name])+"."+l(v),params:[]}}if($(p,nr)){const v=p[de].schema,a=p[de].name;return{sql:v===void 0||p[de].isAlias?l(a):l(v)+"."+l(a),params:[]}}if($(p,ze)){if($(p.value,Pe))return{sql:h(N.value++,p),params:[p],typings:["none"]};const v=p.value===null?null:p.encoder.mapToDriverValue(p.value);if($(v,ne))return this.buildQueryFromSourceParams([v],i);if(g)return{sql:this.mapInlineParam(v,i),params:[]};let a=["none"];return u&&(a=[u(p.encoder)]),{sql:h(N.value++,v),params:[v],typings:a}}return $(p,Pe)?{sql:h(N.value++,p),params:[p],typings:["none"]}:$(p,ne.Aliased)&&p.fieldAlias!==void 0?{sql:l(p.fieldAlias),params:[]}:$(p,Ue)?p._.isWith?{sql:l(p._.alias),params:[]}:this.buildQueryFromSourceParams([new Z("("),p._.sql,new Z(") "),new we(p._.alias)],i):Cl(p)?p.schema?{sql:l(p.schema)+"."+l(p.enumName),params:[]}:{sql:l(p.enumName),params:[]}:Il(p)?(A=p.shouldOmitSQLParens)!=null&&A.call(p)?this.buildQueryFromSourceParams([p.getSQL()],i):this.buildQueryFromSourceParams([new Z("("),p.getSQL(),new Z(")")],i):g?{sql:this.mapInlineParam(p,i),params:[]}:{sql:h(N.value++,p),params:[p],typings:["none"]}}))}mapInlineParam(t,{escapeString:n}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return t.toString();if(typeof t=="string")return n(t);if(typeof t=="object"){const i=t.toString();return n(i==="[object Object]"?JSON.stringify(t):i)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new ne.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}};r(ne,_t,"SQL");let U=ne;var Ct;Ct=m;class we{constructor(t){r(this,"brand");this.value=t}getSQL(){return new U([this])}}r(we,Ct,"Name");const er={mapFromDriverValue:s=>s},tr={mapToDriverValue:s=>s};({...er,...tr});var Dt;Dt=m;class ze{constructor(t,n=tr){r(this,"brand");this.value=t,this.encoder=n}getSQL(){return new U([this])}}r(ze,Dt,"Param");function C(s,...t){const n=[];(t.length>0||s.length>0&&s[0]!=="")&&n.push(new Z(s[0]));for(const[i,c]of t.entries())n.push(c,new Z(s[i+1]));return new U(n)}(s=>{function t(){return new U([])}s.empty=t;function n(g){return new U(g)}s.fromList=n;function i(g){return new U([new Z(g)])}s.raw=i;function c(g,N){const p=[];for(const[A,v]of g.entries())A>0&&N!==void 0&&p.push(N),p.push(v);return new U(p)}s.join=c;function l(g){return new we(g)}s.identifier=l;function h(g){return new Pe(g)}s.placeholder=h;function u(g,N){return new ze(g,N)}s.param=u})(C||(C={}));(s=>{var n;n=m;const i=class i{constructor(l,h){r(this,"isSelectionField",!1);this.sql=l,this.fieldAlias=h}getSQL(){return this.sql}clone(){return new i(this.sql,this.fieldAlias)}};r(i,n,"SQL.Aliased");let t=i;s.Aliased=t})(U||(U={}));var It;It=m;class Pe{constructor(t){this.name=t}getSQL(){return new U([this])}}r(Pe,It,"Placeholder");const sr=Symbol.for("drizzle:IsDrizzleView");var Et,At,Mt;Mt=m,At=de,Et=sr;class nr{constructor({name:t,schema:n,selectedFields:i,query:c}){r(this,At);r(this,Et,!0);this[de]={name:t,originalName:t,schema:n,selectedFields:i,query:c,isExisting:!c,isAlias:!1}}getSQL(){return new U([this])}}r(nr,Mt,"View");function Al(s){return typeof s=="object"&&s!==null&&sr in s}ce.prototype.getSQL=function(){return new U([this])};K.prototype.getSQL=function(){return new U([this])};Ue.prototype.getSQL=function(){return new U([this])};function Ml(s){return s[K.Symbol.Columns]}function Fl(s){return s[de].selectedFields}function z(s,t){return{name:typeof s=="string"&&s.length>0?s:"",config:typeof s=="object"?s:t}}var Ft,qt;class Te extends(qt=P,Ft=m,qt){generatedAlwaysAsIdentity(t){if(t){const{name:n,...i}=t;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:i}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){const{name:n,...i}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:i}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}r(Te,Ft,"PgIntColumnBaseBuilder");var Bt,Lt;class ir extends(Lt=Te,Bt=m,Lt){constructor(t){super(t,"number","PgBigInt53")}build(t){return new rr(t,this.config)}}r(ir,Bt,"PgBigInt53Builder");var Ot,Qt;class rr extends(Qt=T,Ot=m,Qt){getSQLType(){return"bigint"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}r(rr,Ot,"PgBigInt53");var Vt,Ut;class ar extends(Ut=Te,Vt=m,Ut){constructor(t){super(t,"bigint","PgBigInt64")}build(t){return new or(t,this.config)}}r(ar,Vt,"PgBigInt64Builder");var zt,$t;class or extends($t=T,zt=m,$t){getSQLType(){return"bigint"}mapFromDriverValue(t){return BigInt(t)}}r(or,zt,"PgBigInt64");function ql(s,t){const{name:n,config:i}=z(s,t);return i.mode==="number"?new ir(n):new ar(n)}var Kt,Rt;class lr extends(Rt=P,Kt=m,Rt){constructor(t){super(t,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new dr(t,this.config)}}r(lr,Kt,"PgBigSerial53Builder");var Zt,kt;class dr extends(kt=T,Zt=m,kt){getSQLType(){return"bigserial"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}r(dr,Zt,"PgBigSerial53");var Gt,Xt;class cr extends(Xt=P,Gt=m,Xt){constructor(t){super(t,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(t){return new ur(t,this.config)}}r(cr,Gt,"PgBigSerial64Builder");var Ht,Jt;class ur extends(Jt=T,Ht=m,Jt){getSQLType(){return"bigserial"}mapFromDriverValue(t){return BigInt(t)}}r(ur,Ht,"PgBigSerial64");function Bl(s,t){const{name:n,config:i}=z(s,t);return i.mode==="number"?new lr(n):new cr(n)}var Wt,Yt;class mr extends(Yt=P,Wt=m,Yt){constructor(t){super(t,"boolean","PgBoolean")}build(t){return new pr(t,this.config)}}r(mr,Wt,"PgBooleanBuilder");var es,ts;class pr extends(ts=T,es=m,ts){getSQLType(){return"boolean"}}r(pr,es,"PgBoolean");function $e(s){return new mr(s??"")}var ss,ns;class hr extends(ns=P,ss=m,ns){constructor(t,n){super(t,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new gr(t,this.config)}}r(hr,ss,"PgCharBuilder");var is,rs;class gr extends(rs=T,is=m,rs){constructor(){super(...arguments);r(this,"length",this.config.length);r(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}r(gr,is,"PgChar");function Ll(s,t={}){const{name:n,config:i}=z(s,t);return new hr(n,i)}var as,os;class xr extends(os=P,as=m,os){constructor(t){super(t,"string","PgCidr")}build(t){return new fr(t,this.config)}}r(xr,as,"PgCidrBuilder");var ls,ds;class fr extends(ds=T,ls=m,ds){getSQLType(){return"cidr"}}r(fr,ls,"PgCidr");function Ol(s){return new xr(s??"")}var cs,us;class jr extends(us=P,cs=m,us){constructor(t,n,i){super(t,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=i}build(t){return new yr(t,this.config)}}r(jr,cs,"PgCustomColumnBuilder");var ms,ps;class yr extends(ps=T,ms=m,ps){constructor(n,i){super(n,i);r(this,"sqlName");r(this,"mapTo");r(this,"mapFrom");this.sqlName=i.customTypeParams.dataType(i.fieldConfig),this.mapTo=i.customTypeParams.toDriver,this.mapFrom=i.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(n){return typeof this.mapFrom=="function"?this.mapFrom(n):n}mapToDriverValue(n){return typeof this.mapTo=="function"?this.mapTo(n):n}}r(yr,ms,"PgCustomColumn");function Ql(s){return(t,n)=>{const{name:i,config:c}=z(t,n);return new jr(i,c,s)}}var hs,gs;class be extends(gs=P,hs=m,gs){defaultNow(){return this.default(C`now()`)}}r(be,hs,"PgDateColumnBaseBuilder");var xs,fs;class br extends(fs=be,xs=m,fs){constructor(t){super(t,"date","PgDate")}build(t){return new Nr(t,this.config)}}r(br,xs,"PgDateBuilder");var js,ys;class Nr extends(ys=T,js=m,ys){getSQLType(){return"date"}mapFromDriverValue(t){return new Date(t)}mapToDriverValue(t){return t.toISOString()}}r(Nr,js,"PgDate");var bs,Ns;class Tr extends(Ns=be,bs=m,Ns){constructor(t){super(t,"string","PgDateString")}build(t){return new vr(t,this.config)}}r(Tr,bs,"PgDateStringBuilder");var Ts,vs;class vr extends(vs=T,Ts=m,vs){getSQLType(){return"date"}}r(vr,Ts,"PgDateString");function Vl(s,t){const{name:n,config:i}=z(s,t);return(i==null?void 0:i.mode)==="date"?new br(n):new Tr(n)}var Ss,ws;class Sr extends(ws=P,Ss=m,ws){constructor(t){super(t,"number","PgDoublePrecision")}build(t){return new wr(t,this.config)}}r(Sr,Ss,"PgDoublePrecisionBuilder");var Ps,_s;class wr extends(_s=T,Ps=m,_s){getSQLType(){return"double precision"}mapFromDriverValue(t){return typeof t=="string"?Number.parseFloat(t):t}}r(wr,Ps,"PgDoublePrecision");function Ul(s){return new Sr(s??"")}var Cs,Ds;class Pr extends(Ds=P,Cs=m,Ds){constructor(t){super(t,"string","PgInet")}build(t){return new _r(t,this.config)}}r(Pr,Cs,"PgInetBuilder");var Is,Es;class _r extends(Es=T,Is=m,Es){getSQLType(){return"inet"}}r(_r,Is,"PgInet");function zl(s){return new Pr(s??"")}var As,Ms;class Cr extends(Ms=Te,As=m,Ms){constructor(t){super(t,"number","PgInteger")}build(t){return new Dr(t,this.config)}}r(Cr,As,"PgIntegerBuilder");var Fs,qs;class Dr extends(qs=T,Fs=m,qs){getSQLType(){return"integer"}mapFromDriverValue(t){return typeof t=="string"?Number.parseInt(t):t}}r(Dr,Fs,"PgInteger");function I(s){return new Cr(s??"")}var Bs,Ls;class Ir extends(Ls=P,Bs=m,Ls){constructor(t,n){super(t,"string","PgInterval"),this.config.intervalConfig=n}build(t){return new Er(t,this.config)}}r(Ir,Bs,"PgIntervalBuilder");var Os,Qs;class Er extends(Qs=T,Os=m,Qs){constructor(){super(...arguments);r(this,"fields",this.config.intervalConfig.fields);r(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const n=this.fields?` ${this.fields}`:"",i=this.precision?`(${this.precision})`:"";return`interval${n}${i}`}}r(Er,Os,"PgInterval");function $l(s,t={}){const{name:n,config:i}=z(s,t);return new Ir(n,i)}var Vs,Us;class Ar extends(Us=P,Vs=m,Us){constructor(t){super(t,"json","PgJson")}build(t){return new Mr(t,this.config)}}r(Ar,Vs,"PgJsonBuilder");var zs,$s;class Mr extends($s=T,zs=m,$s){constructor(t,n){super(t,n)}getSQLType(){return"json"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}r(Mr,zs,"PgJson");function Kl(s){return new Ar(s??"")}var Ks,Rs;class Fr extends(Rs=P,Ks=m,Rs){constructor(t){super(t,"json","PgJsonb")}build(t){return new qr(t,this.config)}}r(Fr,Ks,"PgJsonbBuilder");var Zs,ks;class qr extends(ks=T,Zs=m,ks){constructor(t,n){super(t,n)}getSQLType(){return"jsonb"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}r(qr,Zs,"PgJsonb");function Ne(s){return new Fr(s??"")}var Gs,Xs;class Br extends(Xs=P,Gs=m,Xs){constructor(t){super(t,"array","PgLine")}build(t){return new Lr(t,this.config)}}r(Br,Gs,"PgLineBuilder");var Hs,Js;class Lr extends(Js=T,Hs=m,Js){getSQLType(){return"line"}mapFromDriverValue(t){const[n,i,c]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(i),Number.parseFloat(c)]}mapToDriverValue(t){return`{${t[0]},${t[1]},${t[2]}}`}}r(Lr,Hs,"PgLine");var Ws,Ys;class Or extends(Ys=P,Ws=m,Ys){constructor(t){super(t,"json","PgLineABC")}build(t){return new Qr(t,this.config)}}r(Or,Ws,"PgLineABCBuilder");var en,tn;class Qr extends(tn=T,en=m,tn){getSQLType(){return"line"}mapFromDriverValue(t){const[n,i,c]=t.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(i),c:Number.parseFloat(c)}}mapToDriverValue(t){return`{${t.a},${t.b},${t.c}}`}}r(Qr,en,"PgLineABC");function Rl(s,t){const{name:n,config:i}=z(s,t);return!(i!=null&&i.mode)||i.mode==="tuple"?new Br(n):new Or(n)}var sn,nn;class Vr extends(nn=P,sn=m,nn){constructor(t){super(t,"string","PgMacaddr")}build(t){return new Ur(t,this.config)}}r(Vr,sn,"PgMacaddrBuilder");var rn,an;class Ur extends(an=T,rn=m,an){getSQLType(){return"macaddr"}}r(Ur,rn,"PgMacaddr");function Zl(s){return new Vr(s??"")}var on,ln;class zr extends(ln=P,on=m,ln){constructor(t){super(t,"string","PgMacaddr8")}build(t){return new $r(t,this.config)}}r(zr,on,"PgMacaddr8Builder");var dn,cn;class $r extends(cn=T,dn=m,cn){getSQLType(){return"macaddr8"}}r($r,dn,"PgMacaddr8");function kl(s){return new zr(s??"")}var un,mn;class Kr extends(mn=P,un=m,mn){constructor(t,n,i){super(t,"string","PgNumeric"),this.config.precision=n,this.config.scale=i}build(t){return new Rr(t,this.config)}}r(Kr,un,"PgNumericBuilder");var pn,hn;class Rr extends(hn=T,pn=m,hn){constructor(n,i){super(n,i);r(this,"precision");r(this,"scale");this.precision=i.precision,this.scale=i.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}r(Rr,pn,"PgNumeric");function Gl(s,t){const{name:n,config:i}=z(s,t);return new Kr(n,i==null?void 0:i.precision,i==null?void 0:i.scale)}var gn,xn;class Zr extends(xn=P,gn=m,xn){constructor(t){super(t,"array","PgPointTuple")}build(t){return new kr(t,this.config)}}r(Zr,gn,"PgPointTupleBuilder");var fn,jn;class kr extends(jn=T,fn=m,jn){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,i]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(i)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}}r(kr,fn,"PgPointTuple");var yn,bn;class Gr extends(bn=P,yn=m,bn){constructor(t){super(t,"json","PgPointObject")}build(t){return new Xr(t,this.config)}}r(Gr,yn,"PgPointObjectBuilder");var Nn,Tn;class Xr extends(Tn=T,Nn=m,Tn){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,i]=t.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(i)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}}r(Xr,Nn,"PgPointObject");function Xl(s,t){const{name:n,config:i}=z(s,t);return!(i!=null&&i.mode)||i.mode==="tuple"?new Zr(n):new Gr(n)}function Hl(s){const t=[];for(let n=0;n<s.length;n+=2)t.push(Number.parseInt(s.slice(n,n+2),16));return new Uint8Array(t)}function Ye(s,t){const n=new ArrayBuffer(8),i=new DataView(n);for(let c=0;c<8;c++)i.setUint8(c,s[t+c]);return i.getFloat64(0,!0)}function Hr(s){const t=Hl(s);let n=0;const i=t[n];n+=1;const c=new DataView(t.buffer),l=c.getUint32(n,i===1);if(n+=4,l&536870912&&(c.getUint32(n,i===1),n+=4),(l&65535)===1){const h=Ye(t,n);n+=8;const u=Ye(t,n);return n+=8,[h,u]}throw new Error("Unsupported geometry type")}var vn,Sn;class Jr extends(Sn=P,vn=m,Sn){constructor(t){super(t,"array","PgGeometry")}build(t){return new Wr(t,this.config)}}r(Jr,vn,"PgGeometryBuilder");var wn,Pn;class Wr extends(Pn=T,wn=m,Pn){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return Hr(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}}r(Wr,wn,"PgGeometry");var _n,Cn;class Yr extends(Cn=P,_n=m,Cn){constructor(t){super(t,"json","PgGeometryObject")}build(t){return new ea(t,this.config)}}r(Yr,_n,"PgGeometryObjectBuilder");var Dn,In;class ea extends(In=T,Dn=m,In){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){const n=Hr(t);return{x:n[0],y:n[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}}r(ea,Dn,"PgGeometryObject");function Jl(s,t){const{name:n,config:i}=z(s,t);return!(i!=null&&i.mode)||i.mode==="tuple"?new Jr(n):new Yr(n)}var En,An;class ta extends(An=P,En=m,An){constructor(t,n){super(t,"number","PgReal"),this.config.length=n}build(t){return new sa(t,this.config)}}r(ta,En,"PgRealBuilder");var Mn,Fn;class sa extends(Fn=T,Mn=m,Fn){constructor(n,i){super(n,i);r(this,"mapFromDriverValue",n=>typeof n=="string"?Number.parseFloat(n):n)}getSQLType(){return"real"}}r(sa,Mn,"PgReal");function na(s){return new ta(s??"")}var qn,Bn;class ia extends(Bn=P,qn=m,Bn){constructor(t){super(t,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new ra(t,this.config)}}r(ia,qn,"PgSerialBuilder");var Ln,On;class ra extends(On=T,Ln=m,On){getSQLType(){return"serial"}}r(ra,Ln,"PgSerial");function Ie(s){return new ia(s??"")}var Qn,Vn;class aa extends(Vn=Te,Qn=m,Vn){constructor(t){super(t,"number","PgSmallInt")}build(t){return new oa(t,this.config)}}r(aa,Qn,"PgSmallIntBuilder");var Un,zn;class oa extends(zn=T,Un=m,zn){constructor(){super(...arguments);r(this,"mapFromDriverValue",n=>typeof n=="string"?Number(n):n)}getSQLType(){return"smallint"}}r(oa,Un,"PgSmallInt");function Wl(s){return new aa(s??"")}var $n,Kn;class la extends(Kn=P,$n=m,Kn){constructor(t){super(t,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new da(t,this.config)}}r(la,$n,"PgSmallSerialBuilder");var Rn,Zn;class da extends(Zn=T,Rn=m,Zn){getSQLType(){return"smallserial"}}r(da,Rn,"PgSmallSerial");function Yl(s){return new la(s??"")}var kn,Gn;class ca extends(Gn=P,kn=m,Gn){constructor(t,n){super(t,"string","PgText"),this.config.enumValues=n.enum}build(t){return new ua(t,this.config)}}r(ca,kn,"PgTextBuilder");var Xn,Hn;class ua extends(Hn=T,Xn=m,Hn){constructor(){super(...arguments);r(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}r(ua,Xn,"PgText");function o(s,t={}){const{name:n,config:i}=z(s,t);return new ca(n,i)}var Jn,Wn;class ma extends(Wn=be,Jn=m,Wn){constructor(t,n,i){super(t,"string","PgTime"),this.withTimezone=n,this.precision=i,this.config.withTimezone=n,this.config.precision=i}build(t){return new pa(t,this.config)}}r(ma,Jn,"PgTimeBuilder");var Yn,ei;class pa extends(ei=T,Yn=m,ei){constructor(n,i){super(n,i);r(this,"withTimezone");r(this,"precision");this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}r(pa,Yn,"PgTime");function ed(s,t={}){const{name:n,config:i}=z(s,t);return new ma(n,i.withTimezone??!1,i.precision)}var ti,si;class ha extends(si=be,ti=m,si){constructor(t,n,i){super(t,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=i}build(t){return new ga(t,this.config)}}r(ha,ti,"PgTimestampBuilder");var ni,ii;class ga extends(ii=T,ni=m,ii){constructor(n,i){super(n,i);r(this,"withTimezone");r(this,"precision");r(this,"mapFromDriverValue",n=>new Date(this.withTimezone?n:n+"+0000"));r(this,"mapToDriverValue",n=>n.toISOString());this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}r(ga,ni,"PgTimestamp");var ri,ai;class xa extends(ai=be,ri=m,ai){constructor(t,n,i){super(t,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=i}build(t){return new fa(t,this.config)}}r(xa,ri,"PgTimestampStringBuilder");var oi,li;class fa extends(li=T,oi=m,li){constructor(n,i){super(n,i);r(this,"withTimezone");r(this,"precision");this.withTimezone=i.withTimezone,this.precision=i.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}r(fa,oi,"PgTimestampString");function _e(s,t={}){const{name:n,config:i}=z(s,t);return(i==null?void 0:i.mode)==="string"?new xa(n,i.withTimezone??!1,i.precision):new ha(n,(i==null?void 0:i.withTimezone)??!1,i==null?void 0:i.precision)}var di,ci;class ja extends(ci=P,di=m,ci){constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(C`gen_random_uuid()`)}build(t){return new ya(t,this.config)}}r(ja,di,"PgUUIDBuilder");var ui,mi;class ya extends(mi=T,ui=m,mi){getSQLType(){return"uuid"}}r(ya,ui,"PgUUID");function td(s){return new ja(s??"")}var pi,hi;class ba extends(hi=P,pi=m,hi){constructor(t,n){super(t,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new Na(t,this.config)}}r(ba,pi,"PgVarcharBuilder");var gi,xi;class Na extends(xi=T,gi=m,xi){constructor(){super(...arguments);r(this,"length",this.config.length);r(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}r(Na,gi,"PgVarchar");function _(s,t={}){const{name:n,config:i}=z(s,t);return new ba(n,i)}var fi,ji;class Ta extends(ji=P,fi=m,ji){constructor(t,n){super(t,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(t){return new va(t,this.config)}}r(Ta,fi,"PgBinaryVectorBuilder");var yi,bi;class va extends(bi=T,yi=m,bi){constructor(){super(...arguments);r(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}r(va,yi,"PgBinaryVector");function sd(s,t){const{name:n,config:i}=z(s,t);return new Ta(n,i)}var Ni,Ti;class Sa extends(Ti=P,Ni=m,Ti){constructor(t,n){super(t,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(t){return new wa(t,this.config)}}r(Sa,Ni,"PgHalfVectorBuilder");var vi,Si;class wa extends(Si=T,vi=m,Si){constructor(){super(...arguments);r(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(i=>Number.parseFloat(i))}}r(wa,vi,"PgHalfVector");function nd(s,t){const{name:n,config:i}=z(s,t);return new Sa(n,i)}var wi,Pi;class Pa extends(Pi=P,wi=m,Pi){constructor(t,n){super(t,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(t){return new _a(t,this.config)}}r(Pa,wi,"PgSparseVectorBuilder");var _i,Ci;class _a extends(Ci=T,_i=m,Ci){constructor(){super(...arguments);r(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}r(_a,_i,"PgSparseVector");function id(s,t){const{name:n,config:i}=z(s,t);return new Pa(n,i)}var Di,Ii;class Ca extends(Ii=P,Di=m,Ii){constructor(t,n){super(t,"array","PgVector"),this.config.dimensions=n.dimensions}build(t){return new Da(t,this.config)}}r(Ca,Di,"PgVectorBuilder");var Ei,Ai;class Da extends(Ai=T,Ei=m,Ai){constructor(){super(...arguments);r(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(i=>Number.parseFloat(i))}}r(Da,Ei,"PgVector");function rd(s,t){const{name:n,config:i}=z(s,t);return new Ca(n,i)}function ad(){return{bigint:ql,bigserial:Bl,boolean:$e,char:Ll,cidr:Ol,customType:Ql,date:Vl,doublePrecision:Ul,inet:zl,integer:I,interval:$l,json:Kl,jsonb:Ne,line:Rl,macaddr:Zl,macaddr8:kl,numeric:Gl,point:Xl,geometry:Jl,real:na,serial:Ie,smallint:Wl,smallserial:Yl,text:o,time:ed,timestamp:_e,uuid:td,varchar:_,bit:sd,halfvec:nd,sparsevec:id,vector:rd}}const Oe=Symbol.for("drizzle:PgInlineForeignKeys"),et=Symbol.for("drizzle:EnableRLS");var Mi,Fi,qi,Bi,Li;class Ce extends(Li=K,Bi=m,qi=Oe,Fi=et,Mi=K.Symbol.ExtraConfigBuilder,Li){constructor(){super(...arguments);r(this,qi,[]);r(this,Fi,!1);r(this,Mi)}}r(Ce,Bi,"PgTable"),r(Ce,"Symbol",Object.assign({},K.Symbol,{InlineForeignKeys:Oe,EnableRLS:et}));function od(s,t,n,i,c=s){const l=new Ce(s,i,c),h=typeof t=="function"?t(ad()):t,u=Object.fromEntries(Object.entries(h).map(([p,A])=>{const v=A;v.setName(p);const a=v.build(l);return l[Oe].push(...v.buildForeignKeys(a,l)),[p,a]})),g=Object.fromEntries(Object.entries(h).map(([p,A])=>{const v=A;v.setName(p);const a=v.buildExtraConfigColumn(l);return[p,a]})),N=Object.assign(l,u);return N[K.Symbol.Columns]=u,N[K.Symbol.ExtraConfigColumns]=g,Object.assign(N,{enableRLS:()=>(N[Ce.Symbol.EnableRLS]=!0,N)})}const F=(s,t,n)=>od(s,t,n,void 0),E={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function M(s,t){return t.includes(s.columnType)}function ld(s){return"enumValues"in s&&Array.isArray(s.enumValues)&&s.enumValues.length>0}const dd=Ve([Qe(),zi(),Qi(),Ui()]),cd=Ve([dd,Ki(ve()),Oi(ve())]),ud=Vi(s=>s instanceof Buffer);function Ia(s,t){const n=(t==null?void 0:t.zodInstance)??Sl,i=(t==null?void 0:t.coerce)??{};let c;return ld(s)&&(c=s.enumValues.length?n.enum(s.enumValues):n.string()),c||(M(s,["PgGeometry","PgPointTuple"])?c=n.tuple([n.number(),n.number()]):M(s,["PgGeometryObject","PgPointObject"])?c=n.object({x:n.number(),y:n.number()}):M(s,["PgHalfVector","PgVector"])?(c=n.array(n.number()),c=s.dimensions?c.length(s.dimensions):c):M(s,["PgLine"])?c=n.tuple([n.number(),n.number(),n.number()]):M(s,["PgLineABC"])?c=n.object({a:n.number(),b:n.number(),c:n.number()}):M(s,["PgArray"])?(c=n.array(Ia(s.baseColumn,n)),c=s.size?c.length(s.size):c):s.dataType==="array"?c=n.array(n.any()):s.dataType==="number"?c=md(s,n,i):s.dataType==="bigint"?c=pd(s,n,i):s.dataType==="boolean"?c=i===!0||i.boolean?n.coerce.boolean():n.boolean():s.dataType==="date"?c=i===!0||i.date?n.coerce.date():n.date():s.dataType==="string"?c=hd(s,n,i):s.dataType==="json"?c=cd:s.dataType==="custom"?c=n.any():s.dataType==="buffer"&&(c=ud)),c||(c=n.any()),c}function md(s,t,n){let i=s.getSQLType().includes("unsigned"),c,l,h=!1;M(s,["MySqlTinyInt","SingleStoreTinyInt"])?(c=i?0:E.INT8_MIN,l=i?E.INT8_UNSIGNED_MAX:E.INT8_MAX,h=!0):M(s,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(c=i?0:E.INT16_MIN,l=i?E.INT16_UNSIGNED_MAX:E.INT16_MAX,h=!0):M(s,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(c=i?0:E.INT24_MIN,l=i?E.INT24_UNSIGNED_MAX:E.INT24_MAX,h=M(s,["MySqlMediumInt","SingleStoreMediumInt"])):M(s,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(c=i?0:E.INT32_MIN,l=i?E.INT32_UNSIGNED_MAX:E.INT32_MAX,h=!0):M(s,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(c=i?0:E.INT48_MIN,l=i?E.INT48_UNSIGNED_MAX:E.INT48_MAX):M(s,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(i=i||M(s,["MySqlSerial","SingleStoreSerial"]),c=i?0:Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER,h=!0):M(s,["MySqlYear","SingleStoreYear"])?(c=1901,l=2155,h=!0):(c=Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER);let u=n===!0||n!=null&&n.number?t.coerce.number():t.number();return u=u.min(c).max(l),h?u.int():u}function pd(s,t,n){const i=s.getSQLType().includes("unsigned"),c=i?0n:E.INT64_MIN,l=i?E.INT64_UNSIGNED_MAX:E.INT64_MAX;return(n===!0||n!=null&&n.bigint?t.coerce.bigint():t.bigint()).min(c).max(l)}function hd(s,t,n){if(M(s,["PgUUID"]))return t.string().uuid();let i,c,l=!1;M(s,["PgVarchar","SQLiteText"])?i=s.length:M(s,["MySqlVarChar","SingleStoreVarChar"])?i=s.length??E.INT16_UNSIGNED_MAX:M(s,["MySqlText","SingleStoreText"])&&(s.textType==="longtext"?i=E.INT32_UNSIGNED_MAX:s.textType==="mediumtext"?i=E.INT24_UNSIGNED_MAX:s.textType==="text"?i=E.INT16_UNSIGNED_MAX:i=E.INT8_UNSIGNED_MAX),M(s,["PgChar","MySqlChar","SingleStoreChar"])&&(i=s.length,l=!0),M(s,["PgBinaryVector"])&&(c=/^[01]+$/,i=s.dimensions);let h=n===!0||n!=null&&n.string?t.coerce.string():t.string();return h=c?h.regex(c):h,i&&l?h.length(i):i?h.max(i):h}function Ea(s){return Yi(s)?Ml(s):Fl(s)}function Aa(s,t,n,i){const c={};for(const[l,h]of Object.entries(s)){if(!$(h,ce)&&!$(h,U)&&!$(h,U.Aliased)&&typeof h=="object"){const A=Yi(h)||Al(h)?Ea(h):h;c[l]=Aa(A,t[l]??{},n,i);continue}const u=t[l];if(u!==void 0&&typeof u!="function"){c[l]=u;continue}const g=$(h,ce)?h:void 0,N=g?Ia(g,i):ve(),p=typeof u=="function"?u(N):N;n.never(g)||(c[l]=p,g&&(n.nullable(g)&&(c[l]=c[l].nullable()),n.optional(g)&&(c[l]=c[l].optional())))}return $i(c)}const gd={never:s=>{var t,n;return((t=s==null?void 0:s.generated)==null?void 0:t.type)==="always"||((n=s==null?void 0:s.generatedIdentity)==null?void 0:n.type)==="always"},optional:s=>!s.notNull||s.notNull&&s.hasDefault,nullable:s=>!s.notNull},q=(s,t)=>{const n=Ea(s);return Aa(n,{},gd)},xd=F("users",{id:_("id").primaryKey().default(C`gen_random_uuid()`),username:o("username").notNull().unique(),password:o("password").notNull()});q(xd).pick({username:!0,password:!0});const fd=F("site_content",{id:_("id").primaryKey().default(C`gen_random_uuid()`),heroTitle:o("hero_title").notNull(),heroSubtitle:o("hero_subtitle").notNull(),heroImage:o("hero_image").notNull(),reviewCount:I("review_count").notNull(),reviewRating:o("review_rating").notNull(),footerPhone:o("footer_phone").notNull(),footerEmail:o("footer_email").notNull(),footerAddress:o("footer_address").notNull(),aboutText:o("about_text").notNull()}),jd=q(fd).omit({id:!0}),yd=F("treatments",{id:_("id").primaryKey().default(C`gen_random_uuid()`),title:o("title").notNull(),shortDescription:o("short_description").notNull(),icon:o("icon").notNull(),slug:o("slug").notNull(),pageTitle:o("page_title").notNull(),heroTitle:o("hero_title").notNull(),heroDescription:o("hero_description").notNull(),description:o("description").notNull(),whoCanBenefit:o("who_can_benefit").notNull(),whatToExpect:o("what_to_expect").notNull(),faqs:o("faqs").notNull().default("[]"),order:I("order").notNull()}),bd=q(yd).omit({id:!0}),Nd=F("team_members",{id:_("id").primaryKey().default(C`gen_random_uuid()`),name:o("name").notNull(),credentials:o("credentials").notNull(),image:o("image").notNull(),doxyUrl:o("doxy_url").notNull().default("https://doxy.me/empathy1"),slug:o("slug").notNull(),bio:o("bio").notNull(),specialties:o("specialties").notNull(),education:o("education").notNull(),approach:o("approach").notNull(),pageTitle:o("page_title").notNull(),order:I("order").notNull()}),Td=q(Nd).omit({id:!0}),vd=F("testimonials",{id:_("id").primaryKey().default(C`gen_random_uuid()`),name:o("name").notNull(),date:o("date").notNull(),text:o("text").notNull(),rating:I("rating").notNull(),profileImage:o("profile_image"),order:I("order").notNull()}),Sd=q(vd).omit({id:!0}),wd=F("insurance_providers",{id:_("id").primaryKey().default(C`gen_random_uuid()`),name:o("name").notNull(),logo:o("logo").notNull(),slug:o("slug").notNull(),pageTitle:o("page_title").notNull(),heroTitle:o("hero_title").notNull(),heroDescription:o("hero_description").notNull(),description:o("description").notNull(),coverageDetails:o("coverage_details").notNull(),faqs:o("faqs").notNull().default("[]"),order:I("order").notNull()}),Pd=q(wd).omit({id:!0}),_d=F("therapies",{id:_("id").primaryKey().default(C`gen_random_uuid()`),title:o("title").notNull(),shortDescription:o("short_description").notNull(),icon:o("icon").notNull(),slug:o("slug").notNull(),pageTitle:o("page_title").notNull(),heroTitle:o("hero_title").notNull(),heroDescription:o("hero_description").notNull(),description:o("description").notNull(),whoCanBenefit:o("who_can_benefit").notNull(),whatToExpect:o("what_to_expect").notNull(),faqs:o("faqs").notNull().default("[]"),order:I("order").notNull()}),Cd=q(_d).omit({id:!0}),Dd=F("conditions",{id:_("id").primaryKey().default(C`gen_random_uuid()`),title:o("title").notNull(),description:o("description").notNull(),slug:o("slug").notNull(),pageTitle:o("page_title").notNull(),heroTitle:o("hero_title").notNull(),heroDescription:o("hero_description").notNull(),fullDescription:o("full_description").notNull(),symptoms:o("symptoms").notNull(),relatedTreatments:o("related_treatments").notNull().default("[]"),relatedTherapies:o("related_therapies").notNull().default("[]"),faqs:o("faqs").notNull().default("[]"),order:I("order").notNull()}),Id=q(Dd).omit({id:!0}),Ed=F("leads",{id:_("id").primaryKey().default(C`gen_random_uuid()`),firstName:o("first_name").notNull(),lastName:o("last_name").notNull(),email:o("email").notNull(),phone:o("phone").notNull(),smsOptIn:o("sms_opt_in").default("false"),service:o("service"),formType:o("form_type").notNull().default("short"),conditions:o("conditions").default("[]"),symptoms:o("symptoms").default("[]"),medications:o("medications"),preferredDay:o("preferred_day"),paymentMethod:o("payment_method"),insuranceProvider:o("insurance_provider"),insuredName:o("insured_name"),insuredDob:o("insured_dob"),memberId:o("member_id"),landingPage:o("landing_page"),source:o("source"),utmSource:o("utm_source"),utmMedium:o("utm_medium"),utmCampaign:o("utm_campaign"),utmTerm:o("utm_term"),utmContent:o("utm_content"),gclid:o("gclid"),fbclid:o("fbclid"),status:o("status").default("new"),rejectionReason:o("rejection_reason"),notes:o("notes"),contactedAt:o("contacted_at"),convertedAt:o("converted_at"),createdAt:o("created_at").notNull().default(C`CURRENT_TIMESTAMP`)});q(Ed).omit({id:!0,createdAt:!0});const Ad=F("blog_posts",{id:_("id").primaryKey().default(C`gen_random_uuid()`),title:o("title").notNull(),slug:o("slug").notNull(),excerpt:o("excerpt").notNull(),content:o("content").notNull(),author:o("author").notNull().default("Empathy Health Clinic"),publishedDate:o("published_date").notNull(),category:o("category").notNull().default("Mental Health"),featuredImage:o("featured_image"),isFeatured:$e("is_featured").notNull().default(!1),status:o("status").notNull().default("published"),scheduledPublishAt:o("scheduled_publish_at"),publishedAt:o("published_at"),metaTitle:o("meta_title"),metaDescription:o("meta_description"),keywords:o("keywords").array(),ogImage:o("og_image"),canonicalSlug:o("canonical_slug"),lastUpdated:o("last_updated"),averageRating:na("average_rating"),ratingCount:I("rating_count"),bestRating:I("best_rating"),worstRating:I("worst_rating"),order:I("order").notNull().default(0),createdAt:o("created_at").notNull().default(C`CURRENT_TIMESTAMP`)});q(Ad).omit({id:!0,createdAt:!0});const Md=F("used_blog_images",{id:_("id").primaryKey().default(C`gen_random_uuid()`),imageUrl:o("image_url").notNull().unique(),description:o("description").notNull(),altText:o("alt_text").notNull(),source:o("source").notNull().default("unsplash"),usedInBlogPostId:_("used_in_blog_post_id"),createdAt:o("created_at").notNull().default(C`CURRENT_TIMESTAMP`)});q(Md).omit({id:!0,createdAt:!0});const Fd=F("page_views",{id:_("id").primaryKey().default(C`gen_random_uuid()`),path:o("path").notNull(),timestamp:o("timestamp").notNull().default(C`CURRENT_TIMESTAMP`),userAgent:o("user_agent"),referrer:o("referrer"),utmSource:o("utm_source"),utmMedium:o("utm_medium"),utmCampaign:o("utm_campaign"),utmTerm:o("utm_term"),utmContent:o("utm_content")});q(Fd).omit({id:!0,timestamp:!0});const qd=F("analytics_events",{id:_("id").primaryKey().default(C`gen_random_uuid()`),eventType:o("event_type").notNull(),eventCategory:o("event_category").notNull(),eventLabel:o("event_label"),value:o("value"),path:o("path").notNull(),timestamp:o("timestamp").notNull().default(C`CURRENT_TIMESTAMP`)});q(qd).omit({id:!0,timestamp:!0});const Bd=F("web_vitals",{id:_("id").primaryKey().default(C`gen_random_uuid()`),metricName:o("metric_name").notNull(),value:o("value").notNull(),rating:o("rating").notNull(),metricId:o("metric_id").notNull(),navigationType:o("navigation_type"),pageDesignType:o("page_design_type"),timestamp:o("timestamp").notNull().default(C`CURRENT_TIMESTAMP`)});q(Bd).omit({id:!0,timestamp:!0});const Ld=F("newsletter_subscribers",{id:_("id").primaryKey().default(C`gen_random_uuid()`),email:o("email").notNull().unique(),subscribedAt:o("subscribed_at").notNull().default(C`CURRENT_TIMESTAMP`),status:o("status").notNull().default("active")});q(Ld).omit({id:!0,subscribedAt:!0}).extend({email:Qe().email("Please enter a valid email address")});const Od=F("locations",{id:_("id").primaryKey().default(C`gen_random_uuid()`),title:o("title").notNull(),slug:o("slug").notNull(),city:o("city").notNull(),serviceType:o("service_type").notNull(),pageTitle:o("page_title").notNull(),metaDescription:o("meta_description").notNull(),heroTitle:o("hero_title").notNull(),heroDescription:o("hero_description").notNull(),description:o("description").notNull(),servicesOffered:o("services_offered").notNull().default("[]"),whyChooseUs:o("why_choose_us").notNull(),faqs:o("faqs").notNull().default("[]"),order:I("order").notNull()});q(Od).omit({id:!0});const Qd=F("email_failures",{id:_("id").primaryKey().default(C`gen_random_uuid()`),leadId:_("lead_id"),emailType:o("email_type").notNull(),recipientEmail:o("recipient_email").notNull(),errorMessage:o("error_message").notNull(),errorDetails:o("error_details"),retryCount:I("retry_count").notNull().default(0),lastRetryAt:o("last_retry_at"),resolved:$e("resolved").notNull().default(!1),createdAt:o("created_at").notNull().default(C`CURRENT_TIMESTAMP`),resolvedAt:o("resolved_at")});q(Qd).omit({id:!0,createdAt:!0});const Vd=F("keyword_ranking_history",{id:_("id").primaryKey().default(C`gen_random_uuid()`),keyword:o("keyword").notNull(),position:I("position"),url:o("url"),competitorPositions:o("competitor_positions"),checkedAt:o("checked_at").notNull().default(C`CURRENT_TIMESTAMP`),error:o("error")});q(Vd).omit({id:!0,checkedAt:!0});const Ke=F("audit_runs",{id:Ie("id").primaryKey(),scheduleType:_("schedule_type",{length:50}),startedAt:_e("started_at").defaultNow(),completedAt:_e("completed_at"),status:_("status",{length:20}).default("pending"),totalUrls:I("total_urls").default(0),processedUrls:I("processed_urls").default(0),summaryPath:_("summary_path",{length:255}),ticketsPath:_("tickets_path",{length:255})});q(Ke).omit({id:!0,startedAt:!0});const Ud=F("audit_run_urls",{id:Ie("id").primaryKey(),runId:I("run_id").references(()=>Ke.id),url:_("url",{length:500}).notNull(),pageType:_("page_type",{length:50}),mobileScore:I("mobile_score"),desktopScore:I("desktop_score"),mobileSeoScore:I("mobile_seo_score"),desktopSeoScore:I("desktop_seo_score"),labMetrics:Ne("lab_metrics"),gscStatus:Ne("gsc_status"),opportunities:Ne("opportunities"),checkedAt:_e("checked_at").defaultNow()});q(Ud).omit({id:!0,checkedAt:!0});const zd=F("audit_issues",{id:Ie("id").primaryKey(),runId:I("run_id").references(()=>Ke.id),url:_("url",{length:500}),category:_("category",{length:50}),severity:_("severity",{length:10}),title:_("title",{length:255}),description:o("description"),evidence:Ne("evidence"),recommendation:o("recommendation"),status:_("status",{length:20}).default("open")});q(zd).omit({id:!0});function $d(){const{toast:s}=te(),{data:t,isLoading:n}=se({queryKey:["/api/site-content"]}),i=re({resolver:oe(jd),values:t||void 0}),c=O({mutationFn:async l=>Q("PUT","/api/site-content",l),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/site-content"]}),s({title:"Success",description:"Site content updated successfully"})},onError:l=>{s({title:"Error",description:l.message,variant:"destructive"})}});return n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(R,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs(X,{children:[e.jsxs(H,{children:[e.jsx(J,{children:"Site Content"}),e.jsx(W,{children:"Edit hero section and footer information"})]}),e.jsx(ie,{children:e.jsx(ae,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(l=>c.mutate(l)),className:"space-y-6",children:[e.jsx(x,{control:i.control,name:"heroTitle",render:({field:l})=>e.jsxs(f,{children:[e.jsx(j,{children:"Hero Title"}),e.jsx(y,{children:e.jsx(w,{...l,"data-testid":"input-hero-title"})}),e.jsx(b,{})]})}),e.jsx(x,{control:i.control,name:"heroSubtitle",render:({field:l})=>e.jsxs(f,{children:[e.jsx(j,{children:"Hero Subtitle"}),e.jsx(y,{children:e.jsx(L,{...l,"data-testid":"input-hero-subtitle"})}),e.jsx(b,{})]})}),e.jsx(x,{control:i.control,name:"heroImage",render:({field:l})=>e.jsxs(f,{children:[e.jsx(j,{children:"Hero Image Path"}),e.jsx(y,{children:e.jsx(w,{...l,"data-testid":"input-hero-image"})}),e.jsx(b,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(x,{control:i.control,name:"reviewCount",render:({field:l})=>e.jsxs(f,{children:[e.jsx(j,{children:"Review Count"}),e.jsx(y,{children:e.jsx(w,{type:"number",...l,onChange:h=>l.onChange(parseInt(h.target.value)),"data-testid":"input-review-count"})}),e.jsx(b,{})]})}),e.jsx(x,{control:i.control,name:"reviewRating",render:({field:l})=>e.jsxs(f,{children:[e.jsx(j,{children:"Review Rating Text"}),e.jsx(y,{children:e.jsx(w,{...l,"data-testid":"input-review-rating"})}),e.jsx(b,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(x,{control:i.control,name:"footerPhone",render:({field:l})=>e.jsxs(f,{children:[e.jsx(j,{children:"Footer Phone"}),e.jsx(y,{children:e.jsx(w,{...l,"data-testid":"input-footer-phone"})}),e.jsx(b,{})]})}),e.jsx(x,{control:i.control,name:"footerEmail",render:({field:l})=>e.jsxs(f,{children:[e.jsx(j,{children:"Footer Email"}),e.jsx(y,{children:e.jsx(w,{type:"email",...l,"data-testid":"input-footer-email"})}),e.jsx(b,{})]})}),e.jsx(x,{control:i.control,name:"footerAddress",render:({field:l})=>e.jsxs(f,{children:[e.jsx(j,{children:"Footer Address"}),e.jsx(y,{children:e.jsx(w,{...l,"data-testid":"input-footer-address"})}),e.jsx(b,{})]})})]}),e.jsx(x,{control:i.control,name:"aboutText",render:({field:l})=>e.jsxs(f,{children:[e.jsx(j,{children:"About Text"}),e.jsx(y,{children:e.jsx(L,{...l,rows:4,"data-testid":"input-about-text"})}),e.jsx(b,{})]})}),e.jsxs(S,{type:"submit",disabled:c.isPending,"data-testid":"button-save-site-content",children:[c.isPending&&e.jsx(R,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})})})]})}function Kd(){const{toast:s}=te(),[t,n]=k.useState(null),[i,c]=k.useState(!1),{data:l,isLoading:h}=se({queryKey:["/api/treatments"]}),u=re({resolver:oe(bd),defaultValues:{title:"",shortDescription:"",icon:"Brain",slug:"",pageTitle:"",heroTitle:"",heroDescription:"",description:"",whoCanBenefit:"",whatToExpect:"",faqs:"[]",order:l!=null&&l.length?l.length+1:1}}),g=O({mutationFn:async d=>Q("POST","/api/treatments",d),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/treatments"]}),s({title:"Success",description:"Treatment created successfully"}),c(!1),u.reset()},onError:d=>{s({title:"Error",description:d.message,variant:"destructive"})}}),N=O({mutationFn:async({id:d,data:G})=>Q("PUT",`/api/treatments/${d}`,G),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/treatments"]}),s({title:"Success",description:"Treatment updated successfully"}),c(!1),n(null),u.reset()},onError:d=>{s({title:"Error",description:d.message,variant:"destructive"})}}),p=O({mutationFn:async d=>Q("DELETE",`/api/treatments/${d}`),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/treatments"]}),s({title:"Success",description:"Treatment deleted successfully"})},onError:d=>{s({title:"Error",description:d.message,variant:"destructive"})}}),A=d=>{try{JSON.parse(d.faqs||"[]")}catch{s({title:"Invalid FAQs",description:"FAQs must be valid JSON. Example: [{'question': 'Q?', 'answer': 'A'}]",variant:"destructive"});return}t?N.mutate({id:t.id,data:d}):g.mutate(d)},v=d=>{n(d),u.reset({title:d.title,shortDescription:d.shortDescription,icon:d.icon,slug:d.slug,pageTitle:d.pageTitle,heroTitle:d.heroTitle,heroDescription:d.heroDescription,description:d.description,whoCanBenefit:d.whoCanBenefit,whatToExpect:d.whatToExpect,faqs:d.faqs,order:d.order}),c(!0)},a=d=>{confirm("Are you sure you want to delete this treatment?")&&p.mutate(d)},D=d=>{c(d),d||(n(null),u.reset({title:"",shortDescription:"",icon:"Brain",slug:"",pageTitle:"",heroTitle:"",heroDescription:"",description:"",whoCanBenefit:"",whatToExpect:"",faqs:"[]",order:l!=null&&l.length?l.length+1:1}))};return h?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(R,{className:"h-8 w-8 animate-spin","data-testid":"loader-treatments"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Treatment Services"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage treatment services and their landing pages"})]}),e.jsxs(ue,{open:i,onOpenChange:D,children:[e.jsx(me,{asChild:!0,children:e.jsxs(S,{"data-testid":"button-add-treatment",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Add Treatment"]})}),e.jsxs(pe,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(he,{children:[e.jsx(ge,{children:t?"Edit Treatment":"Add New Treatment"}),e.jsx(xe,{children:t?"Update treatment details":"Create a new treatment service with its landing page"})]}),e.jsx(ae,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(A),className:"space-y-4",children:[e.jsx(x,{control:u.control,name:"title",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Title"}),e.jsx(y,{children:e.jsx(w,{...d,placeholder:"Bipolar Disorder Treatment","data-testid":"input-title"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"shortDescription",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Short Description"}),e.jsx(B,{children:"Brief description shown on cards (1-2 sentences)"}),e.jsx(y,{children:e.jsx(L,{...d,placeholder:"Personalized plans to stabilize mood...","data-testid":"input-short-description",rows:2})}),e.jsx(b,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{control:u.control,name:"icon",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Icon"}),e.jsx(B,{children:"Lucide icon name"}),e.jsx(y,{children:e.jsx(w,{...d,placeholder:"Brain","data-testid":"input-icon"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"slug",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"URL Slug"}),e.jsx(B,{children:"For SEO-friendly URL"}),e.jsx(y,{children:e.jsx(w,{...d,placeholder:"bipolar-disorder-treatment","data-testid":"input-slug"})}),e.jsx(b,{})]})})]}),e.jsx(x,{control:u.control,name:"pageTitle",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Page Title (SEO)"}),e.jsx(B,{children:"Appears in browser tab and search results"}),e.jsx(y,{children:e.jsx(w,{...d,placeholder:"Bipolar Disorder Treatment in Winter Park, FL | Empathy Health","data-testid":"input-page-title"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"heroTitle",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Hero Section Title"}),e.jsx(B,{children:"Main heading on treatment page"}),e.jsx(y,{children:e.jsx(w,{...d,placeholder:"Expert Bipolar Disorder Treatment","data-testid":"input-hero-title"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"heroDescription",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Hero Description"}),e.jsx(B,{children:"Subtitle in hero section (2-3 sentences)"}),e.jsx(y,{children:e.jsx(L,{...d,placeholder:"Comprehensive psychiatric care...","data-testid":"input-hero-description",rows:3})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"description",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Full Description"}),e.jsx(B,{children:"Detailed treatment overview"}),e.jsx(y,{children:e.jsx(L,{...d,placeholder:"At Empathy Health Clinic, we understand...","data-testid":"input-description",rows:4})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"whoCanBenefit",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Who Can Benefit"}),e.jsx(B,{children:"Target audience and symptoms addressed"}),e.jsx(y,{children:e.jsx(L,{...d,placeholder:"Our treatment helps individuals experiencing...","data-testid":"input-who-can-benefit",rows:3})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"whatToExpect",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"What to Expect"}),e.jsx(B,{children:"Treatment process and approach"}),e.jsx(y,{children:e.jsx(L,{...d,placeholder:"Treatment begins with...","data-testid":"input-what-to-expect",rows:3})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"faqs",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"FAQs (JSON)"}),e.jsxs(B,{children:["Array of FAQ objects: ",'[{"question": "...", "answer": "..."}]']}),e.jsx(y,{children:e.jsx(L,{...d,placeholder:'[{"question": "How long does treatment take?", "answer": "..."}]',"data-testid":"input-faqs",rows:4,className:"font-mono text-sm",onBlur:G=>{d.onBlur();try{const Ee=JSON.parse(G.target.value),Ae=JSON.stringify(Ee,null,2);d.onChange(Ae)}catch{}}})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"order",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Display Order"}),e.jsx(y,{children:e.jsx(w,{...d,type:"number",onChange:G=>d.onChange(parseInt(G.target.value)),"data-testid":"input-order"})}),e.jsx(b,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>D(!1),"data-testid":"button-cancel",children:"Cancel"}),e.jsx(S,{type:"submit",disabled:g.isPending||N.isPending,"data-testid":"button-submit-treatment",children:g.isPending||N.isPending?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[t?"Update":"Create"," Treatment"]})})]})]})})]})]})]}),e.jsx("div",{className:"grid gap-4",children:l==null?void 0:l.map(d=>e.jsxs(X,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(J,{children:d.title}),e.jsxs(W,{children:["/",d.slug]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{variant:"outline",size:"icon",onClick:()=>v(d),"data-testid":`button-edit-${d.id}`,children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx(S,{variant:"outline",size:"icon",onClick:()=>a(d.id),disabled:p.isPending,"data-testid":`button-delete-${d.id}`,children:e.jsx(ye,{className:"h-4 w-4"})})]})]})}),e.jsx(ie,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{className:"text-muted-foreground",children:d.shortDescription}),e.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Icon: ",d.icon]}),e.jsxs("span",{children:["Order: ",d.order]})]})]})})]},d.id))})]})}function Rd(){const{toast:s}=te(),[t,n]=k.useState(null),[i,c]=k.useState(!1),{data:l,isLoading:h}=se({queryKey:["/api/team-members"]}),u=re({resolver:oe(Td),defaultValues:{name:"",credentials:"",image:"",order:l!=null&&l.length?l.length+1:1}}),g=O({mutationFn:async a=>Q("POST","/api/team-members",a),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/team-members"]}),s({title:"Success",description:"Team member added successfully"}),c(!1),u.reset()},onError:a=>{s({title:"Error",description:a.message,variant:"destructive"})}}),N=O({mutationFn:async({id:a,data:D})=>Q("PUT",`/api/team-members/${a}`,D),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/team-members"]}),s({title:"Success",description:"Team member updated successfully"}),c(!1),n(null),u.reset()},onError:a=>{s({title:"Error",description:a.message,variant:"destructive"})}}),p=O({mutationFn:async a=>Q("DELETE",`/api/team-members/${a}`),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/team-members"]}),s({title:"Success",description:"Team member removed successfully"})},onError:a=>{s({title:"Error",description:a.message,variant:"destructive"})}}),A=a=>{n(a),u.reset(a),c(!0)},v=a=>{t?N.mutate({id:t.id,data:a}):g.mutate(a)};return h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(R,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Team Members"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your team"})]}),e.jsxs(ue,{open:i,onOpenChange:c,children:[e.jsx(me,{asChild:!0,children:e.jsxs(S,{onClick:()=>{n(null),u.reset()},"data-testid":"button-add-member",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Add Member"]})}),e.jsxs(pe,{children:[e.jsxs(he,{children:[e.jsx(ge,{children:t?"Edit Team Member":"Add Team Member"}),e.jsx(xe,{children:t?"Update member information":"Add a new team member"})]}),e.jsx(ae,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(v),className:"space-y-4",children:[e.jsx(x,{control:u.control,name:"name",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Name"}),e.jsx(y,{children:e.jsx(w,{...a,"data-testid":"input-member-name"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"credentials",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Credentials"}),e.jsx(y,{children:e.jsx(w,{...a,"data-testid":"input-member-credentials"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"image",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Image Path"}),e.jsx(y,{children:e.jsx(w,{...a,"data-testid":"input-member-image"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"order",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Order"}),e.jsx(y,{children:e.jsx(w,{type:"number",...a,onChange:D=>a.onChange(parseInt(D.target.value)),"data-testid":"input-member-order"})}),e.jsx(b,{})]})}),e.jsxs(S,{type:"submit",disabled:g.isPending||N.isPending,"data-testid":"button-save-member",children:[(g.isPending||N.isPending)&&e.jsx(R,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Update":"Create"]})]})})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:l==null?void 0:l.map(a=>e.jsx(X,{children:e.jsxs(H,{children:[e.jsxs(J,{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-base",children:a.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{size:"icon",variant:"ghost",onClick:()=>A(a),"data-testid":`button-edit-member-${a.id}`,children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx(S,{size:"icon",variant:"ghost",onClick:()=>p.mutate(a.id),"data-testid":`button-delete-member-${a.id}`,children:e.jsx(ye,{className:"h-4 w-4"})})]})]}),e.jsx(W,{children:a.credentials})]})},a.id))})]})}function Zd(){const{toast:s}=te(),[t,n]=k.useState(null),[i,c]=k.useState(!1),{data:l,isLoading:h}=se({queryKey:["/api/testimonials"]}),u=re({resolver:oe(Sd),defaultValues:{name:"",date:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),text:"",rating:5,order:l!=null&&l.length?l.length+1:1}}),g=O({mutationFn:async a=>Q("POST","/api/testimonials",a),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/testimonials"]}),s({title:"Success",description:"Testimonial added successfully"}),c(!1),u.reset()},onError:a=>{s({title:"Error",description:a.message,variant:"destructive"})}}),N=O({mutationFn:async({id:a,data:D})=>Q("PUT",`/api/testimonials/${a}`,D),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/testimonials"]}),s({title:"Success",description:"Testimonial updated successfully"}),c(!1),n(null),u.reset()},onError:a=>{s({title:"Error",description:a.message,variant:"destructive"})}}),p=O({mutationFn:async a=>Q("DELETE",`/api/testimonials/${a}`),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/testimonials"]}),s({title:"Success",description:"Testimonial removed successfully"})},onError:a=>{s({title:"Error",description:a.message,variant:"destructive"})}}),A=a=>{n(a),u.reset(a),c(!0)},v=a=>{t?N.mutate({id:t.id,data:a}):g.mutate(a)};return h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(R,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Testimonials"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage patient reviews"})]}),e.jsxs(ue,{open:i,onOpenChange:c,children:[e.jsx(me,{asChild:!0,children:e.jsxs(S,{onClick:()=>{n(null),u.reset()},"data-testid":"button-add-testimonial",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Add Testimonial"]})}),e.jsxs(pe,{children:[e.jsxs(he,{children:[e.jsx(ge,{children:t?"Edit Testimonial":"Add Testimonial"}),e.jsx(xe,{children:t?"Update testimonial":"Add a new patient review"})]}),e.jsx(ae,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(v),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{control:u.control,name:"name",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Name"}),e.jsx(y,{children:e.jsx(w,{...a,"data-testid":"input-testimonial-name"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"date",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Date"}),e.jsx(y,{children:e.jsx(w,{...a,"data-testid":"input-testimonial-date"})}),e.jsx(b,{})]})})]}),e.jsx(x,{control:u.control,name:"text",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Review Text"}),e.jsx(y,{children:e.jsx(L,{...a,rows:4,"data-testid":"input-testimonial-text"})}),e.jsx(b,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{control:u.control,name:"rating",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Rating (1-5)"}),e.jsx(y,{children:e.jsx(w,{type:"number",min:"1",max:"5",...a,onChange:D=>a.onChange(parseInt(D.target.value)),"data-testid":"input-testimonial-rating"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"order",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Order"}),e.jsx(y,{children:e.jsx(w,{type:"number",...a,onChange:D=>a.onChange(parseInt(D.target.value)),"data-testid":"input-testimonial-order"})}),e.jsx(b,{})]})})]}),e.jsxs(S,{type:"submit",disabled:g.isPending||N.isPending,"data-testid":"button-save-testimonial",children:[(g.isPending||N.isPending)&&e.jsx(R,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Update":"Create"]})]})})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l==null?void 0:l.map(a=>e.jsxs(X,{children:[e.jsxs(H,{children:[e.jsxs(J,{className:"flex items-center justify-between text-base",children:[e.jsx("span",{children:a.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{size:"icon",variant:"ghost",onClick:()=>A(a),"data-testid":`button-edit-testimonial-${a.id}`,children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx(S,{size:"icon",variant:"ghost",onClick:()=>p.mutate(a.id),"data-testid":`button-delete-testimonial-${a.id}`,children:e.jsx(ye,{className:"h-4 w-4"})})]})]}),e.jsxs(W,{children:[a.date,"  ",a.rating,""]})]}),e.jsx(ie,{children:e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:a.text})})]},a.id))})]})}function kd(){const{toast:s}=te(),[t,n]=k.useState(null),[i,c]=k.useState(!1),{data:l,isLoading:h}=se({queryKey:["/api/insurance-providers"]}),u=re({resolver:oe(Pd),defaultValues:{name:"",logo:"",slug:"",pageTitle:"",heroTitle:"",heroDescription:"",description:"",coverageDetails:"",faqs:"[]",order:l!=null&&l.length?l.length+1:1}}),g=O({mutationFn:async a=>Q("POST","/api/insurance-providers",a),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/insurance-providers"]}),s({title:"Success",description:"Insurance provider added successfully"}),c(!1),u.reset()},onError:a=>{s({title:"Error",description:a.message,variant:"destructive"})}}),N=O({mutationFn:async({id:a,data:D})=>Q("PUT",`/api/insurance-providers/${a}`,D),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/insurance-providers"]}),s({title:"Success",description:"Insurance provider updated successfully"}),c(!1),n(null),u.reset()},onError:a=>{s({title:"Error",description:a.message,variant:"destructive"})}}),p=O({mutationFn:async a=>Q("DELETE",`/api/insurance-providers/${a}`),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/insurance-providers"]}),s({title:"Success",description:"Insurance provider removed successfully"})},onError:a=>{s({title:"Error",description:a.message,variant:"destructive"})}}),A=a=>{n(a),u.reset(a),c(!0)},v=a=>{t?N.mutate({id:t.id,data:a}):g.mutate(a)};return h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(R,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Insurance Providers"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage accepted insurance"})]}),e.jsxs(ue,{open:i,onOpenChange:c,children:[e.jsx(me,{asChild:!0,children:e.jsxs(S,{onClick:()=>{n(null),u.reset()},"data-testid":"button-add-provider",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Add Provider"]})}),e.jsxs(pe,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsxs(he,{children:[e.jsx(ge,{children:t?"Edit Provider":"Add Provider"}),e.jsx(xe,{children:t?"Update provider information and page content":"Add a new insurance provider with page details"})]}),e.jsx(ae,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(v),className:"space-y-4",children:[e.jsx(x,{control:u.control,name:"name",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Provider Name"}),e.jsx(y,{children:e.jsx(w,{...a,"data-testid":"input-provider-name"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"logo",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Logo Path"}),e.jsx(y,{children:e.jsx(w,{...a,placeholder:"/attached_assets/insurance/logo.png","data-testid":"input-provider-logo"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"slug",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"URL Slug"}),e.jsx(y,{children:e.jsx(w,{...a,placeholder:"aetna-aetna-coverage","data-testid":"input-provider-slug"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"pageTitle",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Page Title (SEO)"}),e.jsx(y,{children:e.jsx(w,{...a,placeholder:"Find a Psychiatrist That Accepts...","data-testid":"input-provider-page-title"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"heroTitle",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Hero Title"}),e.jsx(y,{children:e.jsx(w,{...a,placeholder:"Main heading for provider page","data-testid":"input-provider-hero-title"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"heroDescription",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Hero Description"}),e.jsx(y,{children:e.jsx(L,{...a,placeholder:"Introductory paragraph for provider page",rows:3,"data-testid":"input-provider-hero-description"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"description",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Full Description"}),e.jsx(y,{children:e.jsx(L,{...a,placeholder:"Detailed description of the provider partnership and services...",rows:4,"data-testid":"input-provider-description"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"coverageDetails",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Coverage Details"}),e.jsx(y,{children:e.jsx(L,{...a,placeholder:"Information about coverage, copays, plans accepted...",rows:4,"data-testid":"input-provider-coverage-details"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"faqs",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"FAQs (JSON format)"}),e.jsx(y,{children:e.jsx(L,{...a,placeholder:'[{"question": "Q1?", "answer": "A1"}, {"question": "Q2?", "answer": "A2"}]',rows:6,className:"font-mono text-sm","data-testid":"input-provider-faqs"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"order",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Display Order"}),e.jsx(y,{children:e.jsx(w,{type:"number",...a,onChange:D=>a.onChange(parseInt(D.target.value)),"data-testid":"input-provider-order"})}),e.jsx(b,{})]})}),e.jsxs(S,{type:"submit",disabled:g.isPending||N.isPending,"data-testid":"button-save-provider",children:[(g.isPending||N.isPending)&&e.jsx(R,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Update":"Create"]})]})})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:l==null?void 0:l.map(a=>e.jsx(X,{children:e.jsxs(H,{children:[e.jsxs(J,{className:"flex items-center justify-between text-base",children:[e.jsx("span",{className:"line-clamp-2",children:a.name}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx(S,{size:"icon",variant:"ghost",onClick:()=>A(a),"data-testid":`button-edit-provider-${a.id}`,children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx(S,{size:"icon",variant:"ghost",onClick:()=>p.mutate(a.id),"data-testid":`button-delete-provider-${a.id}`,children:e.jsx(ye,{className:"h-4 w-4"})})]})]}),e.jsxs(W,{children:["Order: ",a.order]})]})},a.id))})]})}function Gd(){const{toast:s}=te(),[t,n]=k.useState(null),[i,c]=k.useState(!1),{data:l,isLoading:h}=se({queryKey:["/api/therapies"]}),u=re({resolver:oe(Cd),defaultValues:{title:"",shortDescription:"",icon:"Brain",slug:"",pageTitle:"",heroTitle:"",heroDescription:"",description:"",whoCanBenefit:"",whatToExpect:"",faqs:"[]",order:l!=null&&l.length?l.length+1:1}}),g=O({mutationFn:async d=>Q("POST","/api/therapies",d),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/therapies"]}),s({title:"Success",description:"Therapy created successfully"}),c(!1),u.reset()},onError:d=>{s({title:"Error",description:d.message,variant:"destructive"})}}),N=O({mutationFn:async({id:d,data:G})=>Q("PUT",`/api/therapies/${d}`,G),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/therapies"]}),s({title:"Success",description:"Therapy updated successfully"}),c(!1),n(null),u.reset()},onError:d=>{s({title:"Error",description:d.message,variant:"destructive"})}}),p=O({mutationFn:async d=>Q("DELETE",`/api/therapies/${d}`),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/therapies"]}),s({title:"Success",description:"Therapy deleted successfully"})},onError:d=>{s({title:"Error",description:d.message,variant:"destructive"})}}),A=d=>{try{JSON.parse(d.faqs||"[]")}catch{s({title:"Invalid FAQs",description:"FAQs must be valid JSON. Example: [{'question': 'Q?', 'answer': 'A'}]",variant:"destructive"});return}t?N.mutate({id:t.id,data:d}):g.mutate(d)},v=d=>{n(d),u.reset({title:d.title,shortDescription:d.shortDescription,icon:d.icon,slug:d.slug,pageTitle:d.pageTitle,heroTitle:d.heroTitle,heroDescription:d.heroDescription,description:d.description,whoCanBenefit:d.whoCanBenefit,whatToExpect:d.whatToExpect,faqs:d.faqs,order:d.order}),c(!0)},a=d=>{confirm("Are you sure you want to delete this therapy?")&&p.mutate(d)},D=d=>{c(d),d||(n(null),u.reset({title:"",shortDescription:"",icon:"Brain",slug:"",pageTitle:"",heroTitle:"",heroDescription:"",description:"",whoCanBenefit:"",whatToExpect:"",faqs:"[]",order:l!=null&&l.length?l.length+1:1}))};return h?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(R,{className:"h-8 w-8 animate-spin","data-testid":"loader-therapys"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Therapy Services"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage therapy services and their landing pages"})]}),e.jsxs(ue,{open:i,onOpenChange:D,children:[e.jsx(me,{asChild:!0,children:e.jsxs(S,{"data-testid":"button-add-therapy",children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"Add Therapy"]})}),e.jsxs(pe,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(he,{children:[e.jsx(ge,{children:t?"Edit Therapy":"Add New Therapy"}),e.jsx(xe,{children:t?"Update therapy details":"Create a new therapy service with its landing page"})]}),e.jsx(ae,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(A),className:"space-y-4",children:[e.jsx(x,{control:u.control,name:"title",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Title"}),e.jsx(y,{children:e.jsx(w,{...d,placeholder:"Bipolar Disorder Therapy","data-testid":"input-title"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"shortDescription",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Short Description"}),e.jsx(B,{children:"Brief description shown on cards (1-2 sentences)"}),e.jsx(y,{children:e.jsx(L,{...d,placeholder:"Personalized plans to stabilize mood...","data-testid":"input-short-description",rows:2})}),e.jsx(b,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(x,{control:u.control,name:"icon",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Icon"}),e.jsx(B,{children:"Lucide icon name"}),e.jsx(y,{children:e.jsx(w,{...d,placeholder:"Brain","data-testid":"input-icon"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"slug",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"URL Slug"}),e.jsx(B,{children:"For SEO-friendly URL"}),e.jsx(y,{children:e.jsx(w,{...d,placeholder:"bipolar-disorder-therapy","data-testid":"input-slug"})}),e.jsx(b,{})]})})]}),e.jsx(x,{control:u.control,name:"pageTitle",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Page Title (SEO)"}),e.jsx(B,{children:"Appears in browser tab and search results"}),e.jsx(y,{children:e.jsx(w,{...d,placeholder:"Bipolar Disorder Therapy in Winter Park, FL | Empathy Health","data-testid":"input-page-title"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"heroTitle",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Hero Section Title"}),e.jsx(B,{children:"Main heading on therapy page"}),e.jsx(y,{children:e.jsx(w,{...d,placeholder:"Expert Bipolar Disorder Therapy","data-testid":"input-hero-title"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"heroDescription",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Hero Description"}),e.jsx(B,{children:"Subtitle in hero section (2-3 sentences)"}),e.jsx(y,{children:e.jsx(L,{...d,placeholder:"Comprehensive psychiatric care...","data-testid":"input-hero-description",rows:3})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"description",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Full Description"}),e.jsx(B,{children:"Detailed therapy overview"}),e.jsx(y,{children:e.jsx(L,{...d,placeholder:"At Empathy Health Clinic, we understand...","data-testid":"input-description",rows:4})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"whoCanBenefit",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Who Can Benefit"}),e.jsx(B,{children:"Target audience and symptoms addressed"}),e.jsx(y,{children:e.jsx(L,{...d,placeholder:"Our therapy helps individuals experiencing...","data-testid":"input-who-can-benefit",rows:3})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"whatToExpect",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"What to Expect"}),e.jsx(B,{children:"Therapy process and approach"}),e.jsx(y,{children:e.jsx(L,{...d,placeholder:"Therapy begins with...","data-testid":"input-what-to-expect",rows:3})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"faqs",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"FAQs (JSON)"}),e.jsxs(B,{children:["Array of FAQ objects: ",'[{"question": "...", "answer": "..."}]']}),e.jsx(y,{children:e.jsx(L,{...d,placeholder:'[{"question": "How long does therapy take?", "answer": "..."}]',"data-testid":"input-faqs",rows:4,className:"font-mono text-sm",onBlur:G=>{d.onBlur();try{const Ee=JSON.parse(G.target.value),Ae=JSON.stringify(Ee,null,2);d.onChange(Ae)}catch{}}})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"order",render:({field:d})=>e.jsxs(f,{children:[e.jsx(j,{children:"Display Order"}),e.jsx(y,{children:e.jsx(w,{...d,type:"number",onChange:G=>d.onChange(parseInt(G.target.value)),"data-testid":"input-order"})}),e.jsx(b,{})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(S,{type:"button",variant:"outline",onClick:()=>D(!1),"data-testid":"button-cancel",children:"Cancel"}),e.jsx(S,{type:"submit",disabled:g.isPending||N.isPending,"data-testid":"button-submit-therapy",children:g.isPending||N.isPending?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[t?"Update":"Create"," Therapy"]})})]})]})})]})]})]}),e.jsx("div",{className:"grid gap-4",children:l==null?void 0:l.map(d=>e.jsxs(X,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(J,{children:d.title}),e.jsxs(W,{children:["/",d.slug]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{variant:"outline",size:"icon",onClick:()=>v(d),"data-testid":`button-edit-${d.id}`,children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx(S,{variant:"outline",size:"icon",onClick:()=>a(d.id),disabled:p.isPending,"data-testid":`button-delete-${d.id}`,children:e.jsx(ye,{className:"h-4 w-4"})})]})]})}),e.jsx(ie,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{className:"text-muted-foreground",children:d.shortDescription}),e.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Icon: ",d.icon]}),e.jsxs("span",{children:["Order: ",d.order]})]})]})})]},d.id))})]})}function Xd(){const{toast:s}=te(),[t,n]=k.useState(null),[i,c]=k.useState(!1),{data:l,isLoading:h}=se({queryKey:["/api/conditions"]}),u=re({resolver:oe(Id),defaultValues:{description:"",order:l!=null&&l.length?l.length+1:1}}),g=O({mutationFn:async a=>Q("POST","/api/conditions",a),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/conditions"]}),s({title:"Success",description:"Condition added successfully"}),c(!1),u.reset()},onError:a=>{s({title:"Error",description:a.message,variant:"destructive"})}}),N=O({mutationFn:async({id:a,data:D})=>Q("PUT",`/api/conditions/${a}`,D),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/conditions"]}),s({title:"Success",description:"Condition updated successfully"}),c(!1),n(null),u.reset()},onError:a=>{s({title:"Error",description:a.message,variant:"destructive"})}}),p=O({mutationFn:async a=>Q("DELETE",`/api/conditions/${a}`),onSuccess:()=>{V.invalidateQueries({queryKey:["/api/conditions"]}),s({title:"Success",description:"Condition removed successfully"})},onError:a=>{s({title:"Error",description:a.message,variant:"destructive"})}}),A=a=>{n(a),u.reset(a),c(!0)},v=a=>{t?N.mutate({id:t.id,data:a}):g.mutate(a)};return h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(R,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Conditions We Treat"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage conditions list"})]}),e.jsxs(ue,{open:i,onOpenChange:c,children:[e.jsx(me,{asChild:!0,children:e.jsxs(S,{onClick:()=>{n(null),u.reset()},"data-testid":"button-add-condition",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Add Condition"]})}),e.jsxs(pe,{children:[e.jsxs(he,{children:[e.jsx(ge,{children:t?"Edit Condition":"Add Condition"}),e.jsx(xe,{children:t?"Update condition description":"Add a new condition"})]}),e.jsx(ae,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(v),className:"space-y-4",children:[e.jsx(x,{control:u.control,name:"description",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Description"}),e.jsx(y,{children:e.jsx(L,{...a,rows:3,"data-testid":"input-condition-description"})}),e.jsx(b,{})]})}),e.jsx(x,{control:u.control,name:"order",render:({field:a})=>e.jsxs(f,{children:[e.jsx(j,{children:"Order"}),e.jsx(y,{children:e.jsx(w,{type:"number",...a,onChange:D=>a.onChange(parseInt(D.target.value)),"data-testid":"input-condition-order"})}),e.jsx(b,{})]})}),e.jsxs(S,{type:"submit",disabled:g.isPending||N.isPending,"data-testid":"button-save-condition",children:[(g.isPending||N.isPending)&&e.jsx(R,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Update":"Create"]})]})})]})]})]}),e.jsx("div",{className:"space-y-3",children:l==null?void 0:l.map(a=>e.jsx(X,{children:e.jsxs(H,{children:[e.jsxs(J,{className:"flex items-start justify-between",children:[e.jsx("span",{className:"text-base flex-1",children:a.description}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx(S,{size:"icon",variant:"ghost",onClick:()=>A(a),"data-testid":`button-edit-condition-${a.id}`,children:e.jsx(je,{className:"h-4 w-4"})}),e.jsx(S,{size:"icon",variant:"ghost",onClick:()=>p.mutate(a.id),"data-testid":`button-delete-condition-${a.id}`,children:e.jsx(ye,{className:"h-4 w-4"})})]})]}),e.jsxs(W,{children:["Order: ",a.order]})]})},a.id))})]})}function Hd(){const{toast:s}=te(),{data:t=[],isLoading:n}=se({queryKey:["/api/newsletter/subscribers"]}),i=O({mutationFn:async()=>await Q("POST","/api/newsletter/send"),onSuccess:l=>{s({title:"Newsletter sent!",description:l.message||"Newsletter has been sent to all active subscribers."}),V.invalidateQueries({queryKey:["/api/newsletter/subscribers"]})},onError:l=>{s({title:"Failed to send newsletter",description:l.message||"Please try again later.",variant:"destructive"})}}),c=t.filter(l=>l.status==="active");return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading subscribers..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(X,{"data-testid":"card-newsletter-overview",children:[e.jsxs(H,{children:[e.jsx(J,{children:"Newsletter Management"}),e.jsx(W,{children:"Manage your newsletter subscribers and send weekly blog updates"})]}),e.jsxs(ie,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Subscribers"})]}),e.jsx("p",{className:"text-3xl font-bold","data-testid":"text-total-subscribers",children:t.length})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(qa,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Active Subscribers"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400","data-testid":"text-active-subscribers",children:c.length})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs(S,{onClick:()=>i.mutate(),disabled:i.isPending||c.length===0,className:"w-full","data-testid":"button-send-newsletter",children:[e.jsx(Tl,{className:"w-4 h-4 mr-2"}),i.isPending?"Sending...":"Send Newsletter Now"]})})]}),c.length===0&&e.jsx("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"No active subscribers yet. Subscribers will appear here when users sign up via the website footer."})})]})]}),c.length>0&&e.jsxs(X,{"data-testid":"card-subscriber-list",children:[e.jsxs(H,{children:[e.jsx(J,{children:"Active Subscribers"}),e.jsxs(W,{children:[c.length," ",c.length===1?"person":"people"," subscribed to your newsletter"]})]}),e.jsx(ie,{children:e.jsx("div",{className:"space-y-3",children:c.map((l,h)=>e.jsx("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg","data-testid":`subscriber-${h}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(Re,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium","data-testid":`text-subscriber-email-${h}`,children:l.email}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Subscribed ",new Date(l.subscribedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]})},l.id))})})]}),e.jsxs(X,{"data-testid":"card-newsletter-info",children:[e.jsx(H,{children:e.jsx(J,{children:"About Weekly Newsletters"})}),e.jsx(ie,{children:e.jsxs("div",{className:"space-y-4 text-sm text-muted-foreground",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-foreground",children:"How it works:"}),' When you click "Send Newsletter Now", all active subscribers will receive an email featuring your latest blog posts.']}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-foreground",children:"What's included:"})," The newsletter showcases up to 5 of your most recent blog articles with titles, excerpts, and direct links to read more."]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-foreground",children:"Best practice:"})," Send newsletters once per week after publishing new blog content to keep your audience engaged."]}),e.jsx("p",{className:"text-xs italic",children:"Note: Subscriber data is stored in memory and will reset when the server restarts. Consider upgrading to a database for production use."})]})})]})]})}function oc(){const[,s]=Ba();return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b border-border sticky top-0 bg-background/95 backdrop-blur-md z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-sans font-medium",children:"Patient Portal"}),e.jsxs(S,{variant:"outline",onClick:()=>s("/"),"data-testid":"button-back-to-site",children:[e.jsx(vl,{className:"w-4 h-4 mr-2"}),"Back to Site"]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"mb-6 flex flex-wrap gap-3",children:[e.jsx(S,{variant:"default",onClick:()=>s("/admin/analytics"),"data-testid":"button-analytics",children:"View Analytics Dashboard"}),e.jsx(S,{variant:"outline",onClick:()=>s("/admin/lead-insights"),"data-testid":"button-lead-insights",children:"Lead Insights"}),e.jsx(S,{variant:"outline",onClick:()=>s("/admin/link-monitor"),"data-testid":"button-link-monitor",children:"Link & Performance Monitor"}),e.jsx(S,{variant:"outline",onClick:()=>s("/admin/seo"),"data-testid":"button-seo-optimization",children:"SEO Optimization"}),e.jsx(S,{variant:"outline",onClick:()=>s("/admin/blog-seo"),"data-testid":"button-blog-seo",children:"Blog SEO Optimizer"}),e.jsx(S,{variant:"outline",onClick:()=>s("/admin/semrush"),"data-testid":"button-semrush",children:"SEMrush Keyword Optimizer"}),e.jsx(S,{variant:"outline",onClick:()=>s("/admin/utm-tracker"),"data-testid":"button-utm-tracker",children:"UTM Tracker (Clarity Fix)"}),e.jsx(S,{variant:"outline",onClick:()=>s("/admin/google-ads"),"data-testid":"button-google-ads",children:"Google Ads Performance"}),e.jsx(S,{variant:"outline",onClick:()=>s("/admin/serp"),"data-testid":"button-serp",children:"SERP Rankings (100 Keywords)"}),e.jsx(S,{variant:"outline",onClick:()=>s("/admin/seo-audit"),"data-testid":"button-seo-audit",children:"SEO Audit (PSI + GSC)"})]}),e.jsxs(La,{defaultValue:"site-content",className:"space-y-6",children:[e.jsxs(Oa,{className:"grid w-full grid-cols-2 lg:grid-cols-8 gap-2",children:[e.jsx(Y,{value:"site-content","data-testid":"tab-site-content",children:"Site Content"}),e.jsx(Y,{value:"treatments","data-testid":"tab-treatments",children:"Treatments"}),e.jsx(Y,{value:"therapies","data-testid":"tab-therapies",children:"Therapies"}),e.jsx(Y,{value:"team","data-testid":"tab-team",children:"Team"}),e.jsx(Y,{value:"testimonials","data-testid":"tab-testimonials",children:"Testimonials"}),e.jsx(Y,{value:"insurance","data-testid":"tab-insurance",children:"Insurance"}),e.jsx(Y,{value:"conditions","data-testid":"tab-conditions",children:"Conditions"}),e.jsx(Y,{value:"newsletter","data-testid":"tab-newsletter",children:"Newsletter"})]}),e.jsx(ee,{value:"site-content",children:e.jsx($d,{})}),e.jsx(ee,{value:"treatments",children:e.jsx(Kd,{})}),e.jsx(ee,{value:"therapies",children:e.jsx(Gd,{})}),e.jsx(ee,{value:"team",children:e.jsx(Rd,{})}),e.jsx(ee,{value:"testimonials",children:e.jsx(Zd,{})}),e.jsx(ee,{value:"insurance",children:e.jsx(kd,{})}),e.jsx(ee,{value:"conditions",children:e.jsx(Xd,{})}),e.jsx(ee,{value:"newsletter",children:e.jsx(Hd,{})})]})]})]})}export{oc as default};
