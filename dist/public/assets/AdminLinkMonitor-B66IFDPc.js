import{O as v,u as y,Q as w,j as e,B as p,C as n,c as i,d as l,F as m,e as c,r as k,a1 as C,a7 as R}from"./index-CgsemtNf.js";import{B as g}from"./badge-CYF5D6iW.js";import{A as o,b as d}from"./alert-p0mUESB5.js";import{H as P}from"./house-d9x4eLL5.js";import{R as A}from"./refresh-cw-BXMHVCn8.js";import{T as b}from"./triangle-alert-069s_g3B.js";import{E as a}from"./external-link-Dqi3fO-u.js";import{T}from"./trending-down-0OaeVcYU.js";function q(){var j,f;const[,N]=v(),{data:r,isLoading:h}=y({queryKey:["/api/analytics/link-monitor"]}),t=w({mutationFn:async()=>C("POST","/api/analytics/clarity/refresh",{}),onSuccess:s=>{R.invalidateQueries({queryKey:["/api/analytics/link-monitor"]}),!s.success&&s.warning&&console.warn("[Clarity API]",s.warning)}}),x=((j=r==null?void 0:r.bounceRates)==null?void 0:j.filter(s=>s.bounceRate>70))||[],u=((f=r==null?void 0:r.bounceRates)==null?void 0:f.filter(s=>s.bounceRate>40&&s.bounceRate<=70))||[];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b border-border sticky top-0 bg-background/95 backdrop-blur-md z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-sans font-medium",children:"Link & Performance Monitor"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Track bounce rates and identify problematic pages"})]}),e.jsxs(p,{variant:"outline",onClick:()=>N("/admin"),"data-testid":"button-back-to-admin",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Back to Admin"]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8 space-y-6",children:[e.jsxs(n,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Microsoft Clarity Integration"}),e.jsx(m,{children:"API Rate Limit: 10 calls per day - Data cached for 24 hours"})]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>t.mutate(),disabled:t.isPending,"data-testid":"button-refresh-clarity",children:[e.jsx(A,{className:`w-4 h-4 mr-2 ${t.isPending?"animate-spin":""}`}),t.isPending?"Refreshing...":"Refresh Data"]})]})}),e.jsx(c,{children:r!=null&&r.clarityCache.cached?e.jsxs(o,{children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx(d,{children:r.note})]}):e.jsxs(o,{children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Clarity API integration is optional. Local bounce rate tracking is active and working."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"To enable Clarity API features, ensure valid CLARITY_API_TOKEN is configured and API endpoints are accessible."})]})})]})})]}),e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-destructive"}),"High Bounce Rate Pages (70%+)"]}),e.jsx(m,{children:"Pages where most visitors leave without viewing other pages. These may have issues or irrelevant content."})]}),e.jsx(c,{children:h?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading data..."}):x.length===0?e.jsx(o,{children:e.jsx(d,{children:"No pages with high bounce rates detected. Your content is performing well."})}):e.jsx("div",{className:"space-y-3",children:x.slice(0,10).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover-elevate",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("code",{className:"text-sm font-mono text-foreground break-all",children:s.path}),e.jsx("a",{href:s.path,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0",children:e.jsx(a,{className:"h-4 w-4 text-muted-foreground hover:text-primary"})})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.views," views • ",s.bounces," bounces"]})]}),e.jsxs(g,{variant:"destructive",className:"text-base font-semibold ml-4",children:[s.bounceRate,"%"]})]},s.path))})})]}),e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-500"}),"Medium Bounce Rate Pages (40-70%)"]}),e.jsx(m,{children:"Pages with moderate bounce rates. Monitor these for potential improvements."})]}),e.jsx(c,{children:h?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading data..."}):u.length===0?e.jsx(o,{children:e.jsx(d,{children:"No pages in this range."})}):e.jsx("div",{className:"space-y-3",children:u.slice(0,10).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover-elevate",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("code",{className:"text-sm font-mono text-foreground break-all",children:s.path}),e.jsx("a",{href:s.path,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0",children:e.jsx(a,{className:"h-4 w-4 text-muted-foreground hover:text-primary"})})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.views," views • ",s.bounces," bounces"]})]}),e.jsxs(g,{variant:"secondary",className:"text-base font-semibold ml-4",children:[s.bounceRate,"%"]})]},s.path))})})]}),e.jsxs(n,{children:[e.jsx(i,{children:e.jsx(l,{children:"Recommendations"})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"For High Bounce Rate Pages:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:"Check for broken images or links"}),e.jsx("li",{children:"Verify content matches user search intent"}),e.jsx("li",{children:"Add clear calls-to-action (CTAs)"}),e.jsx("li",{children:"Improve page load speed"}),e.jsx("li",{children:"Add internal links to related content"}),e.jsx("li",{children:"Review mobile responsiveness"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"External Tools:"}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("a",{href:"https://www.deadlinkchecker.com",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline flex items-center gap-1",children:["Dead Link Checker - Free automated monitoring",e.jsx(a,{className:"h-3 w-3"})]}),e.jsxs("a",{href:"https://search.google.com/search-console",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline flex items-center gap-1",children:["Google Search Console - Check 404 errors",e.jsx(a,{className:"h-3 w-3"})]}),e.jsxs("a",{href:"https://www.clarity.ms",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline flex items-center gap-1",children:["Microsoft Clarity Dashboard - View heatmaps & session recordings",e.jsx(a,{className:"h-3 w-3"})]})]})]})]})]})]})]})}export{q as default};
